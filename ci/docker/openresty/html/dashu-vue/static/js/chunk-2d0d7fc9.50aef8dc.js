(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7fc9"],{"78c5":function(t,a,e){"use strict";e.r(a);var r,l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{margin:"20px"}},[e("h1",[t._v("支付宝PC扫码支付")]),e("el-form",{ref:"dataForm",attrs:{"label-position":"right","label-width":"100px"}},[e("el-form-item",{attrs:{label:"支付金额",prop:"totalFee"}},[e("el-input-number",{attrs:{placeholder:"请输入支付金额"},model:{value:t.payData.totalFee,callback:function(a){t.$set(t.payData,"totalFee",a)},expression:"payData.totalFee"}}),e("span",{staticStyle:{"margin-left":"20px",color:"red"}},[t._v("(单位：分)")])],1),e("el-form-item",{attrs:{label:"PC扫码支付"}},[t.tradePayQRCodeUrl?e("img",{attrs:{src:t.tradePayQRCodeUrl}}):e("div",{staticStyle:{"font-size":"10px",color:"red"}},[t._v("付款码加载中...")])])],1),e("div",{staticStyle:{margin:"20px 100px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.clearBack}},[t._v("返回")])],1)],1)},n=[],o=e("5530"),i=(e("b64b"),e("ac1f"),e("5319"),e("d055")),s=e.n(i),c={name:"AlipayScanPay",data:function(){return{tradePayQRCodeUrl:"",payData:{productId:"xxxx-xxxx-xx-x",productName:"测试商品",totalFee:1,attach:""}}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.tradePayQRCodeUrl="",this.payData=Object(o["a"])({},JSON.parse(window.sessionStorage.getItem("payData")));var a=Object(o["a"])({},this.payData);this.$request({url:"/pay/alipay/scanPay",method:"post",data:a}).then((function(a){s.a.toDataURL(a.data.qrCodeUrl).then((function(a){t.tradePayQRCodeUrl=a})),t.alipayUpdateStatus(a.data.tradeId)}))},alipayUpdateStatus:function(t){var a=this,e={tradeId:t};r=setInterval((function(){a.$request({url:"/pay/alipay/getPayResult",method:"get",params:e}).then((function(t){1===t.data.tradeStatus&&(a.$message({type:"success",message:"您已支付成功!",duration:5e3,showClose:!0}),a.clearBack())}))}),2e3)},clearBack:function(){clearInterval(r),this.$router.replace("/demo/trade")}}},d=c,p=e("2877"),u=Object(p["a"])(d,l,n,!1,null,null,null);a["default"]=u.exports}}]);