(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e962c646"],{1249:function(e,t,o){"use strict";o("edd09")},"16b0":function(e,t,o){},"21f1":function(e,t,o){"use strict";o("16b0")},"9f5a":function(e,t,o){"use strict";o("afb4")},afb4:function(e,t,o){},b953:function(e,t,o){"use strict";o.r(t);o("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loginBody",style:"background-image: url('"+e.loginBg[e.loginBgIndex]+"');"},[t("main",{staticClass:"d-flex align-items-center min-vh-100 py-3 py-md-0"},[t("div",{staticClass:"container"},[t("div",{staticClass:"card login-card"},[t("div",{staticClass:"row no-gutters"},[t("div",{staticClass:"col-md-5"},[t("img",{staticClass:"login-card-img",attrs:{src:e.loginBg[e.loginBgIndex],alt:"login"},on:{error:e.handleImageError}}),t("div",{staticClass:"toggle-login-bg"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"换一批",placement:"top"}},[t("i",{staticClass:"el-icon-refresh",on:{click:function(t){return e.loadRemoteWallpaper(!0)}}})]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上一张",placement:"top"}},[t("i",{staticClass:"el-icon-arrow-left",on:{click:function(t){return e.toggleLoginBg(2)}}})]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下一张",placement:"top"}},[t("i",{staticClass:"el-icon-arrow-right",on:{click:function(t){return e.toggleLoginBg(1)}}})])],1)]),t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"card-body login-container"},[t("p",{staticClass:"login-card-description"},[e._v("用户注册")]),t("el-form",{ref:"regForm",attrs:{model:e.regForm,rules:e.loginRules,autocomplete:"off","label-position":"left"}},[t("el-form-item",{attrs:{prop:"userName"}},[t("el-input",{ref:"userName",attrs:{"prefix-icon":"el-icon-user",tabindex:"1",placeholder:"请输入用户名",name:"userName",type:"text",autocomplete:"off"},model:{value:e.regForm.userName,callback:function(t){e.$set(e.regForm,"userName",t)},expression:"regForm.userName"}})],1),t("el-tooltip",{attrs:{content:"大写已打开",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{ref:"password",attrs:{"prefix-icon":"el-icon-lock",tabindex:"2",type:"password","show-password":"",placeholder:"请输入密码",name:"password",autocomplete:"off"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:function(t){return e.checkCapslock.apply(null,arguments)}},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password",t)},expression:"regForm.password"}})],1)],1),t("el-tooltip",{attrs:{content:"大写已打开",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"rePassword"}},[t("el-input",{ref:"rePassword",attrs:{"prefix-icon":"el-icon-lock",tabindex:"3",type:"password","show-password":"",placeholder:"请再次输入密码确认",name:"rePassword",autocomplete:"off"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:function(t){return e.checkCapslock.apply(null,arguments)}},model:{value:e.regForm.rePassword,callback:function(t){e.$set(e.regForm,"rePassword",t)},expression:"regForm.rePassword"}})],1)],1),t("el-form-item",{attrs:{prop:"yzm"}},[t("el-input",{ref:"yzm",staticClass:"yzmInput",attrs:{"prefix-icon":"el-icon-help",tabindex:"4",placeholder:"请输入验证码",name:"yzm",type:"text",autocomplete:"off"},model:{value:e.regForm.yzm,callback:function(t){e.$set(e.regForm,"yzm",t)},expression:"regForm.yzm"}}),t("img",{staticClass:"yzmImg",attrs:{src:e.regForm.codeBaseImage},on:{click:e.loadCaptcha}})],1),t("el-collapse",{staticStyle:{"margin-bottom":"20px","padding-bottom":"0px!important"}},[t("el-collapse-item",{attrs:{title:"选填项",name:"1"}},[t("el-form-item",{attrs:{prop:"orgId"}},[t("select-tree",{staticStyle:{width:"100%"},attrs:{tabindex:"5","empty-text":"请选择","empty-value":"-1",props:{children:"children",label:"label"},data:e.orgList},model:{value:e.regForm.orgId,callback:function(t){e.$set(e.regForm,"orgId",t)},expression:"regForm.orgId"}})],1),t("el-form-item",{staticStyle:{"text-align":"left",border:"1px solid #00000020","border-radius":".25rem"},attrs:{prop:"sex"}},[t("span",{staticStyle:{color:"#c0c4cc",margin:"auto 15px auto 10px"}},[t("el-icon",{staticClass:"el-icon-male"}),t("span",{staticStyle:{"margin-left":"6px"}},[e._v("性别")])],1),t("el-radio-group",{attrs:{tabindex:"6"},model:{value:e.regForm.sex,callback:function(t){e.$set(e.regForm,"sex",t)},expression:"regForm.sex"}},[t("el-radio",{attrs:{label:"0"}},[e._v("保密")]),t("el-radio",{attrs:{label:"1"}},[e._v("男")]),t("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),t("el-form-item",{attrs:{prop:"nickName"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user-solid",type:"text",tabindex:"7",autocomplete:"off",placeholder:"请输入昵称"},model:{value:e.regForm.nickName,callback:function(t){e.$set(e.regForm,"nickName",t)},expression:"regForm.nickName"}})],1),t("el-form-item",{attrs:{prop:"introduce"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off","show-word-limit":"",tabindex:"8",maxlength:"50",placeholder:"个人简介"},model:{value:e.regForm.introduce,callback:function(t){e.$set(e.regForm,"introduce",t)},expression:"regForm.introduce"}})],1),t("el-form-item",{attrs:{prop:"name"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",type:"text",autocomplete:"off",tabindex:"9",placeholder:"姓名"},model:{value:e.regForm.name,callback:function(t){e.$set(e.regForm,"name",t)},expression:"regForm.name"}})],1),t("el-form-item",{attrs:{prop:"phone"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-mobile-phone",type:"text",tabindex:"10",autocomplete:"off",placeholder:"手机号"},model:{value:e.regForm.phone,callback:function(t){e.$set(e.regForm,"phone",t)},expression:"regForm.phone"}})],1)],1)],1),t("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister.apply(null,arguments)}}},[e._v(" 点击注册 ")])],1),e._m(0),t("p",{staticClass:"login-card-footer-text"},[t("router-link",{staticClass:"text-reset",attrs:{to:"login"}},[e._v("返回登录")])],1)],1)])])])])])])},r=[function(){var e=this,t=e._self._c;return t("p",{staticClass:"login-card-footer-text"},[t("span",{staticStyle:{color:"#666"}},[e._v("注册即代表同意")]),t("a",{attrs:{target:"_blank",href:"/protocol.html"}},[e._v("《用户协议》")]),t("a",{attrs:{target:"_blank",href:"/protocol.html"}},[e._v("《隐私协议》")])])}],l=o("5530"),s=(o("d9e2"),o("14d9"),o("b64b"),o("e9c4"),o("15d7")),i=o("d737"),n=o("fb36"),c={name:"Login",components:{SelectTree:n["a"]},data:function(){var e=this;return{loginBg:[o("65f4"),o("e23d"),o("c643")],loginBgIndex:0,regForm:{userName:"",password:"",rePassword:"",sex:"0",yzm:"",codeUuid:"",codeBaseImage:""},loginRules:{userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],rePassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(t,o,a){o!==e.regForm.password?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],yzm:[{required:!0,message:"验证码不能为空",trigger:"blur"}],phone:[{pattern:/^1(3|4|5|7|8|9)\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},capsTooltip:!1,loading:!1,intervalIndex:0,autoRefresh:!1,orgList:[]}},mounted:function(){this.$refs.userName.focus(),this.loadCaptcha(),this.autoRefreshLoginBg(),this.loadRemoteWallpaper(),this.loadOrgList()},destroyed:function(){clearInterval(this.intervalIndex)},methods:{loadOrgList:function(){var e=this;this.$request({url:"/register/org/list",method:"get"}).then((function(t){e.orgList=t.data}))},checkCapslock:function(e){var t=e.key;this.capsTooltip=t&&1===t.length&&t>="A"&&t<="Z"},toggleLoginBg:function(e){this.loginBgIndex=1===e?this.loginBgIndex>=this.loginBg.length-1?0:this.loginBgIndex+1:0===this.loginBgIndex?this.loginBg.length-1:this.loginBgIndex-1,this.autoRefresh&&this.autoRefreshLoginBg()},autoRefreshLoginBg:function(){var e=this;clearInterval(this.intervalIndex),this.intervalIndex=setInterval((function(){e.toggleLoginBg(1)}),1e4),this.autoRefresh=!0},handleRegister:function(){var e=this;this.$refs.regForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0;var o=Object(l["a"])({},e.regForm);o.isEncrypt=!0,o.userName=Object(s["a"])(e.regForm.userName),o.password=Object(s["a"])(e.regForm.password),e.$request({url:"register/new",method:"post",data:o}).then((function(t){e.$message({type:"success",message:"注册成功！"}),e.$router.push({path:"login"}),e.loading=!1})).catch((function(t){console.log(t),e.loading=!1,e.loadCaptcha()}))}))},loadCaptcha:function(){var e=this;this.$request({url:"/captcha/get",method:"get"}).then((function(t){e.regForm.codeUuid=t.data.codeUuid,e.regForm.codeBaseImage=t.data.codeBaseImage}))},loadRemoteWallpaper:function(e){var t=this;try{var o=0;e&&(localStorage.removeItem(this.$storageKeys.loginBgData),o=parseInt(localStorage.getItem(this.$storageKeys.loginBgDataSkip))+1||0);var a=localStorage.getItem(this.$storageKeys.loginBgData);a?this.loginBg=JSON.parse(a):Object(i["a"])(null,"hot",20,20*o).then((function(e){if(e&&e.length>0){t.loginBg=[];for(var a=0;a<e.length;a++)t.loginBg.push(e[a].img);localStorage.setItem(t.$storageKeys.loginBgData,JSON.stringify(t.loginBg)),localStorage.setItem(t.$storageKeys.loginBgDataSkip,o)}}))}catch(r){console.log(r)}},handleImageError:function(e){e.target.src=o("65f4")}}},p=c,u=(o("21f1"),o("9f5a"),o("2877")),g=Object(u["a"])(p,a,r,!1,null,"5f6fed6e",null);t["default"]=g.exports},edd09:function(e,t,o){},fb36:function(e,t,o){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-select",{ref:"selectTree",staticClass:"main-select-tree",model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[t("el-option",{key:e.emptyValue,attrs:{label:e.emptyText,value:e.emptyValue}}),e._l(e.options,(function(e){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.value,attrs:{label:e.label,value:e.value}})})),t("el-tree",{ref:"selectElTree",staticClass:"main-select-el-tree",attrs:{data:e.data,"current-node-key":e.selectValue,"node-key":"value","highlight-current":"",props:e.props,"expand-on-click-node":!1,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],2)},r=[],l=(o("d3b7"),o("159b"),o("14d9"),{name:"select-tree",props:{value:{type:String,default:""},emptyValue:{type:String,default:""},emptyText:{type:String,default:"请选择"},name:{type:String,default:""},data:{type:Array,default:[]},props:{type:Object,default:{children:"children",label:"label"}}},data:function(){return{selectValue:"",options:[]}},mounted:function(){this.selectValue=this.value},watch:{data:function(){this.options=[],this.formatOptions(this.data)},selectValue:function(){this.$emit("input",this.selectValue)},value:function(){this.selectValue=this.value}},methods:{formatOptions:function(e){var t=this;e.forEach((function(e,o){t.options.push({label:e.label,value:e.value}),e.children&&t.formatOptions(e.children)}))},handleNodeClick:function(e){this.selectValue=e.value,this.$refs.selectTree.blur()}}}),s=l,i=(o("1249"),o("2877")),n=Object(i["a"])(s,a,r,!1,null,null,null);t["a"]=n.exports}}]);