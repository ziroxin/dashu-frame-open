(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f00628c4"],{"1c59":function(e,t,i){"use strict";var s=i("6d61"),n=i("6566");s("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},"4fad":function(e,t,i){var s=i("d039"),n=i("861d"),r=i("c6b6"),o=i("d86b"),l=Object.isExtensible,a=s((function(){l(1)}));e.exports=a||o?function(e){return!!n(e)&&((!o||"ArrayBuffer"!=r(e))&&(!l||l(e)))}:l},6062:function(e,t,i){i("1c59")},6566:function(e,t,i){"use strict";var s=i("7c73"),n=i("edd0"),r=i("6964"),o=i("0366"),l=i("19aa"),a=i("7234"),c=i("2266"),u=i("c6d2"),d=i("4754"),p=i("2626"),f=i("83ab"),h=i("f183").fastKey,m=i("69f3"),b=m.set,g=m.getterFor;e.exports={getConstructor:function(e,t,i,u){var d=e((function(e,n){l(e,p),b(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),f||(e.size=0),a(n)||c(n,e[u],{that:e,AS_ENTRIES:i})})),p=d.prototype,m=g(t),v=function(e,t,i){var s,n,r=m(e),o=w(e,t);return o?o.value=i:(r.last=o={index:n=h(t,!0),key:t,value:i,previous:s=r.last,next:void 0,removed:!1},r.first||(r.first=o),s&&(s.next=o),f?r.size++:e.size++,"F"!==n&&(r.index[n]=o)),e},w=function(e,t){var i,s=m(e),n=h(t);if("F"!==n)return s.index[n];for(i=s.first;i;i=i.next)if(i.key==t)return i};return r(p,{clear:function(){var e=this,t=m(e),i=t.index,s=t.first;while(s)s.removed=!0,s.previous&&(s.previous=s.previous.next=void 0),delete i[s.index],s=s.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,i=m(t),s=w(t,e);if(s){var n=s.next,r=s.previous;delete i.index[s.index],s.removed=!0,r&&(r.next=n),n&&(n.previous=r),i.first==s&&(i.first=n),i.last==s&&(i.last=r),f?i.size--:t.size--}return!!s},forEach:function(e){var t,i=m(this),s=o(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:i.first){s(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!w(this,e)}}),r(p,i?{get:function(e){var t=w(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),f&&n(p,"size",{configurable:!0,get:function(){return m(this).size}}),d},setStrong:function(e,t,i){var s=t+" Iterator",n=g(t),r=g(s);u(e,t,(function(e,t){b(this,{type:s,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,i=e.last;while(i&&i.removed)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?d("keys"==t?i.key:"values"==t?i.value:[i.key,i.value],!1):(e.target=void 0,d(void 0,!0))}),i?"entries":"values",!i,!0),p(t)}}},6964:function(e,t,i){var s=i("cb2d");e.exports=function(e,t,i){for(var n in t)s(e,n,t[n],i);return e}},"6d61":function(e,t,i){"use strict";var s=i("23e7"),n=i("da84"),r=i("e330"),o=i("94ca"),l=i("cb2d"),a=i("f183"),c=i("2266"),u=i("19aa"),d=i("1626"),p=i("7234"),f=i("861d"),h=i("d039"),m=i("1c7e"),b=i("d44e"),g=i("7156");e.exports=function(e,t,i){var v=-1!==e.indexOf("Map"),w=-1!==e.indexOf("Weak"),y=v?"set":"add",x=n[e],S=x&&x.prototype,L=x,A={},k=function(e){var t=r(S[e]);l(S,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(w&&!f(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return w&&!f(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(w&&!f(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})},P=o(e,!d(x)||!(w||S.forEach&&!h((function(){(new x).entries().next()}))));if(P)L=i.getConstructor(t,e,v,y),a.enable();else if(o(e,!0)){var I=new L,R=I[y](w?{}:-0,1)!=I,O=h((function(){I.has(1)})),T=m((function(e){new x(e)})),E=!w&&h((function(){var e=new x,t=5;while(t--)e[y](t,t);return!e.has(-0)}));T||(L=t((function(e,t){u(e,S);var i=g(new x,e,L);return p(t)||c(t,i[y],{that:i,AS_ENTRIES:v}),i})),L.prototype=S,S.constructor=L),(O||E)&&(k("delete"),k("has"),v&&k("get")),(E||R)&&k(y),w&&S.clear&&delete S.clear}return A[e]=L,s({global:!0,constructor:!0,forced:L!=x},A),b(L,e),w||i.setStrong(L,e,v),L}},"70eb":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",[i("el-col",{attrs:{span:7}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-role-add",expression:"'system-role-add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.roleAdd}}),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-role-update",expression:"'system-role-update'"}],attrs:{type:"success",icon:"el-icon-edit",size:"small"},on:{click:e.roleUpdate}}),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-role-delete",expression:"'system-role-delete'"}],attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:e.roleDelete}}),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-role-copy",expression:"'system-role-copy'"}],attrs:{type:"warning",icon:"el-icon-copy-document",size:"small"},on:{click:e.roleCopy}})],1),i("el-table",{ref:"roleTable",staticStyle:{width:"95%"},attrs:{data:e.tableData,stripe:"",border:"",height:this.$windowHeight-230},on:{"selection-change":e.handleTableSelectChange}},[i("el-table-column",{attrs:{type:"selection",width:"50",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-popover",{attrs:{trigger:"hover",placement:"right",title:t.row.roleName}},[i("p",[e._v(" 顺序："+e._s(t.row.roleOrder)),i("br"),e._v("描述："+e._s(t.row.roleDescription)+" ")]),i("span",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.roleName))])])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.setMyApi(t.row)}}},[e._v("设置权限")])]}}])})],1),i("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"total, pager","page-size":e.pager.limit,"current-page":e.pager.page,total:e.totalCount},on:{"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:e.titleMap[e.dialogType],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"roleDateForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:e.temp,"label-position":"left","label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"roleName",rules:{required:!0,message:"角色名称不能为空"}}},[i("el-input",{model:{value:e.temp.roleName,callback:function(t){e.$set(e.temp,"roleName",t)},expression:"temp.roleName"}})],1),i("el-form-item",{attrs:{label:"角色描述",prop:"roleDescription"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.temp.roleDescription,callback:function(t){e.$set(e.temp,"roleDescription",t)},expression:"temp.roleDescription"}})],1),i("el-form-item",{attrs:{label:"角色顺序",prop:"roleOrder",rules:[{required:!0,message:"角色顺序不能为空"},{type:"number",message:"必须为数字"}]}},[i("el-input",{model:{value:e.temp.roleOrder,callback:function(t){e.$set(e.temp,"roleOrder",e._n(t))},expression:"temp.roleOrder"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveRoles}},[e._v("保存")]),i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),i("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{"padding-left":"20px","border-left":"1px solid #dedede"},attrs:{span:17}},[i("div",{staticStyle:{"margin-bottom":"5px"}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-role-save-permission",expression:"'system-role-save-permission'"}],attrs:{disabled:!e.isSaveBtn,size:"small",icon:"el-icon-check",type:"primary"},on:{click:function(t){return e.saveRolePermission()}}},[e._v("保存角色权限 ")]),i("el-button",{attrs:{size:"small",icon:e.isExpand?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:e.toggleTableOprate}},[e._v(" 全部"+e._s(e.isExpand?"收起":"展开")+" ")])],1),i("el-table",{ref:"permissionTable",staticStyle:{width:"100%"},attrs:{height:this.$windowHeight-200,"default-expand-all":e.isExpand,data:e.tableData2,"row-key":"permissionId","tree-props":{children:"children"},resizable:"",border:""},on:{"row-click":e.table2RowClick,select:e.table2RowSelect}},[i("el-table-column",{attrs:{type:"selection",width:"50",align:"center","header-align":"center"}}),i("el-table-column",{attrs:{label:"路由/外链","min-width":"30%"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return["0"===s.permissionType?i("el-tag",{attrs:{"disable-transitions":"",size:"mini"}},[e._v("路由")]):e._e(),"2"===s.permissionType?i("el-tag",{attrs:{"disable-transitions":"",type:"success",size:"mini"}},[e._v("外链")]):e._e(),i("a",{staticStyle:{cursor:"pointer","margin-left":"5px"}},[e._v(e._s(s.permissionTitle))])]}}])}),i("el-table-column",{attrs:{label:"按钮/其他","min-width":"60%"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("div",{on:{click:function(e){e.stopPropagation()}}},[i("el-checkbox-group",{model:{value:e.selectPermissionApiList,callback:function(t){e.selectPermissionApiList=t},expression:"selectPermissionApiList"}},e._l(s.buttonList,(function(t){return i("el-checkbox",{key:t.permissionId,staticStyle:{"margin-left":"0px!important"},attrs:{label:t.permissionId},on:{change:function(t){return e.buttonCheckChange(t,s)}}},[e._v(" "+e._s(t.permissionTitle)+" ")])})),1)],1)]}}])})],1)],1)],1)],1)},n=[],r=i("2909"),o=(i("d81d"),i("d3b7"),i("159b"),i("14d9"),i("4de4"),i("6062"),i("3ca3"),i("ddb0"),i("cc5e")),l={data:function(){return{pager:{page:1,limit:10},totalCount:0,tableData:[],tableSelectRows:[],roleId:"",titleMap:{add:"添加角色",update:"修改角色"},dialogType:"",dialogFormVisible:!1,temp:{},tableData2:[],currentRow:0,isExpand:!0,selectPermissionApiList:[],selectPermissionApiList2:[],isSaveBtn:!1,isLoading:!1}},created:function(){this.loadRoleList(),this.loadPermissionTreeList(),this.resetTemp()},methods:{loadRoleList:function(){var e=this;Object(o["e"])(this.pager).then((function(t){var i=t.data;e.totalCount=i.total,e.tableData=i.records}))},handleTableSelectChange:function(e){this.tableSelectRows=e},handleCurrentChange:function(e){this.pager.page=e,this.loadRoleList()},resetTemp:function(){this.temp={roleId:"",roleName:"",roleDescription:"",roleOrder:1}},roleAdd:function(){var e=this;this.resetTemp(),this.dialogFormVisible=!0,this.dialogType="add",this.$nextTick((function(){e.$refs["roleDateForm"].clearValidate()}))},roleUpdate:function(){var e=this;this.tableSelectRows.length<=0?this.$message({message:"请选择一条数据修改！",type:"warning"}):this.tableSelectRows.length>1?this.$message({message:"修改时，只允许选择一条数据！",type:"warning"}):(this.temp=Object.assign({},this.tableSelectRows[0]),this.dialogType="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["roleDateForm"].clearValidate()})))},roleDelete:function(){var e=this;this.tableSelectRows.length<=0?this.$message({message:"请选择一条数据删除！",type:"warning"}):this.$confirm("确定要删除吗?","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.tableSelectRows.map((function(e){return e.roleId}));Object(o["c"])(t).then((function(t){var i=t.code;"200"===i?(e.$message({type:"success",message:"删除成功！"}),e.loadRoleList()):e.$message({type:"error",message:"删除失败！"})}))}))},roleCopy:function(){var e=this;if(1!==this.tableSelectRows.length)this.$message({message:"请选择一个角色进行复制！",type:"error"});else{var t={roleId:this.tableSelectRows[0].roleId};Object(o["b"])(t).then((function(t){e.$message({type:"success",message:"复制角色成功！"}),e.loadRoleList()}))}},saveRoles:function(){var e=this;this.$refs["roleDateForm"].validate((function(t){t&&("update"===e.dialogType?Object(o["g"])(e.temp).then((function(t){e.$message({type:"success",message:"修改成功！"}),e.loadRoleList(),e.dialogFormVisible=!1})):Object(o["a"])(e.temp).then((function(t){e.$message({type:"success",message:"添加成功！"}),e.loadRoleList(),e.dialogFormVisible=!1})))}))},loadPermissionTreeList:function(){var e=this;this.isLoading=!0;var t=""===this.roleId?{}:{roleId:this.roleId};this.$nextTick((function(){Object(o["d"])(t).then((function(t){var i=t.data;e.tableData2=i,e.$nextTick((function(){e.selectPermissionApiList=[],e.selectPermissionApiList2=[],e.toggleRowSelectionAll(e.tableData2)})),e.isLoading=!1}))}))},toggleTableOprate:function(){this.isExpand?this.isExpand=!1:this.isExpand=!0,this.toggleRowExpansionAll(this.tableData2,this.isExpand)},toggleRowExpansionAll:function(e,t){var i=this;e.forEach((function(e){i.$refs.permissionTable.toggleRowExpansion(e,t),void 0!==e.children&&null!==e.children&&i.toggleRowExpansionAll(e.children,t)}))},setMyApi:function(e){this.$refs.roleTable.clearSelection(),this.$refs.roleTable.toggleRowSelection(e,!0),this.roleId=e.roleId,this.isSaveBtn=!0,this.isExpand=!0,this.loadPermissionTreeList()},toggleRowSelectionAll:function(e){var t=this;e.forEach((function(e){e.buttonList.forEach((function(e){e.hasPermission&&t.selectPermissionApiList.push(e.permissionId)})),e.hasPermission&&t.selectPermissionApiList2.push(e.permissionId),t.$refs.permissionTable.toggleRowSelection(e,e.hasPermission),void 0!==e.children&&null!==e.children&&t.toggleRowSelectionAll(e.children)}))},table2RowSelect:function(e,t){var i=e.filter((function(e){return e.permissionId===t.permissionId})).length>0;i?this.selectPermissionApiList2.push(t.permissionId):this.selectPermissionApiList2=this.selectPermissionApiList2.filter((function(e){return e!==t.permissionId})),this.$refs.permissionTable.toggleRowSelection(t,i),this.cancelButtonChecked(this.tableData2,t.permissionId,i),i&&this.parentRowSelected(this.tableData2,t.parentId,0),this.allChildrenSelected(this.tableData2,t.permissionId,!1,i),this.selectPermissionApiList=Object(r["a"])(new Set(this.selectPermissionApiList)),this.selectPermissionApiList2=Object(r["a"])(new Set(this.selectPermissionApiList2))},table2RowClick:function(e){var t=this.selectPermissionApiList2.filter((function(t){return t===e.permissionId})).length>0;t?this.selectPermissionApiList2=this.selectPermissionApiList2.filter((function(t){return t!==e.permissionId})):this.selectPermissionApiList2.push(e.permissionId),this.$refs.permissionTable.toggleRowSelection(e,!t),this.cancelButtonChecked(this.tableData2,e.permissionId,!t),t||this.parentRowSelected(this.tableData2,e.parentId,0),this.allChildrenSelected(this.tableData2,e.permissionId,!1,!t),this.selectPermissionApiList=Object(r["a"])(new Set(this.selectPermissionApiList)),this.selectPermissionApiList2=Object(r["a"])(new Set(this.selectPermissionApiList2))},cancelButtonChecked:function(e,t,i){var s=this;e.forEach((function(e){e.permissionId===t?void 0!==e.buttonList&&null!==e.buttonList&&(i?e.buttonList.forEach((function(e){s.selectPermissionApiList.push(e.permissionId)})):e.buttonList.forEach((function(e){s.selectPermissionApiList=s.selectPermissionApiList.filter((function(t){return t!==e.permissionId}))}))):void 0!==e.children&&null!==e.children&&s.cancelButtonChecked(e.children,t,i)}))},parentRowSelected:function(e,t,i){var s=this;e.forEach((function(n){n.permissionId===t?(s.selectPermissionApiList2.push(n.permissionId),s.$refs.permissionTable.toggleRowSelection(n,!0),0!==i&&s.parentRowSelected(e,n.parentId)):void 0!==n.children&&null!==n.children&&s.parentRowSelected(n.children,t,i++)}))},allChildrenSelected:function(e,t,i,s){var n=this;i?e.forEach((function(e){e.buttonList.forEach((function(e){s?n.selectPermissionApiList.push(e.permissionId):n.selectPermissionApiList=n.selectPermissionApiList.filter((function(t){return t!==e.permissionId}))})),s?n.selectPermissionApiList2.push(e.permissionId):n.selectPermissionApiList2=n.selectPermissionApiList2.filter((function(t){return t!==e.permissionId})),n.$refs.permissionTable.toggleRowSelection(e,s),void 0!==e.children&&null!==e.children&&n.allChildrenSelected(e.children,t,!0,s)})):e.forEach((function(e){void 0!==e.children&&null!==e.children&&(e.permissionId===t?n.allChildrenSelected(e.children,t,!0,s):n.allChildrenSelected(e.children,t,!1,s))}))},buttonCheckChange:function(e,t){!0===e&&(this.selectPermissionApiList2.push(t.permissionId),this.parentRowSelected(this.tableData2,t.parentId,0),this.$refs.permissionTable.toggleRowSelection(t,!0),this.selectPermissionApiList2=Object(r["a"])(new Set(this.selectPermissionApiList2)))},saveRolePermission:function(){var e=this;this.isLoading=!0;var t=[];t.push.apply(t,Object(r["a"])(this.selectPermissionApiList)),t.push.apply(t,Object(r["a"])(this.selectPermissionApiList2)),Object(o["f"])({roleId:this.roleId,permissionIds:t}).then((function(t){e.$notify({title:"保存成功",message:"保存权限成功！",type:"success"}),e.isLoading=!1}))}}},a=l,c=i("2877"),u=Object(c["a"])(a,s,n,!1,null,null,null);t["default"]=u.exports},bb2f:function(e,t,i){var s=i("d039");e.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},cc5e:function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"g",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return c})),i.d(t,"f",(function(){return u}));var s=i("b775");function n(){return Object(s["a"])({url:"/role/list",method:"get"})}function r(e){return Object(s["a"])({url:"/role/update",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/role/add",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/role/delete",method:"delete",data:e})}function a(e){return Object(s["a"])({url:"/role/copy",method:"post",params:e})}function c(e){return Object(s["a"])({url:"/permission/listForRole",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/role/permission/saveRolePermission",method:"post",data:e})}},d86b:function(e,t,i){var s=i("d039");e.exports=s((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},f183:function(e,t,i){var s=i("23e7"),n=i("e330"),r=i("d012"),o=i("861d"),l=i("1a2d"),a=i("9bf2").f,c=i("241c"),u=i("057f"),d=i("4fad"),p=i("90e3"),f=i("bb2f"),h=!1,m=p("meta"),b=0,g=function(e){a(e,m,{value:{objectID:"O"+b++,weakData:{}}})},v=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!l(e,m)){if(!d(e))return"F";if(!t)return"E";g(e)}return e[m].objectID},w=function(e,t){if(!l(e,m)){if(!d(e))return!0;if(!t)return!1;g(e)}return e[m].weakData},y=function(e){return f&&h&&d(e)&&!l(e,m)&&g(e),e},x=function(){S.enable=function(){},h=!0;var e=c.f,t=n([].splice),i={};i[m]=1,e(i).length&&(c.f=function(i){for(var s=e(i),n=0,r=s.length;n<r;n++)if(s[n]===m){t(s,n,1);break}return s},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},S=e.exports={enable:x,fastKey:v,getWeakData:w,onFreeze:y};r[m]=!0}}]);