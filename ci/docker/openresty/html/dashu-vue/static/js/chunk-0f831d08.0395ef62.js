(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f831d08"],{"21a6":function(e,t,a){(function(a){var n,r,i;(function(a,s){r=[],n=s,i="function"===typeof n?n.apply(t,r):n,void 0===i||(e.exports=i)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){l(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,a){var o=s.URL||s.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?n(e,t,a):i(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,s){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,s),a);else if(r(e))n(e,a,s);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){i(o)}))}}:function(e,t,a,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,a);var i="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var d=s.URL||s.webkitURL,p=d.createObjectURL(e);r?r.location=p:location.href=p,r=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});s.saveAs=l.saveAs=l,e.exports=l}))}).call(this,a("c8ba"))},6809:function(e,t,a){"use strict";a("997a")},"69a0":function(e,t,a){(function(t){e.exports=t()})((function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(e,t){var a=e[0],n=e[1],r=e[2],i=e[3];a+=(n&r|~n&i)+t[0]-680876936|0,a=(a<<7|a>>>25)+n|0,i+=(a&n|~a&r)+t[1]-389564586|0,i=(i<<12|i>>>20)+a|0,r+=(i&a|~i&n)+t[2]+606105819|0,r=(r<<17|r>>>15)+i|0,n+=(r&i|~r&a)+t[3]-1044525330|0,n=(n<<22|n>>>10)+r|0,a+=(n&r|~n&i)+t[4]-176418897|0,a=(a<<7|a>>>25)+n|0,i+=(a&n|~a&r)+t[5]+1200080426|0,i=(i<<12|i>>>20)+a|0,r+=(i&a|~i&n)+t[6]-1473231341|0,r=(r<<17|r>>>15)+i|0,n+=(r&i|~r&a)+t[7]-45705983|0,n=(n<<22|n>>>10)+r|0,a+=(n&r|~n&i)+t[8]+1770035416|0,a=(a<<7|a>>>25)+n|0,i+=(a&n|~a&r)+t[9]-1958414417|0,i=(i<<12|i>>>20)+a|0,r+=(i&a|~i&n)+t[10]-42063|0,r=(r<<17|r>>>15)+i|0,n+=(r&i|~r&a)+t[11]-1990404162|0,n=(n<<22|n>>>10)+r|0,a+=(n&r|~n&i)+t[12]+1804603682|0,a=(a<<7|a>>>25)+n|0,i+=(a&n|~a&r)+t[13]-40341101|0,i=(i<<12|i>>>20)+a|0,r+=(i&a|~i&n)+t[14]-1502002290|0,r=(r<<17|r>>>15)+i|0,n+=(r&i|~r&a)+t[15]+1236535329|0,n=(n<<22|n>>>10)+r|0,a+=(n&i|r&~i)+t[1]-165796510|0,a=(a<<5|a>>>27)+n|0,i+=(a&r|n&~r)+t[6]-1069501632|0,i=(i<<9|i>>>23)+a|0,r+=(i&n|a&~n)+t[11]+643717713|0,r=(r<<14|r>>>18)+i|0,n+=(r&a|i&~a)+t[0]-373897302|0,n=(n<<20|n>>>12)+r|0,a+=(n&i|r&~i)+t[5]-701558691|0,a=(a<<5|a>>>27)+n|0,i+=(a&r|n&~r)+t[10]+38016083|0,i=(i<<9|i>>>23)+a|0,r+=(i&n|a&~n)+t[15]-660478335|0,r=(r<<14|r>>>18)+i|0,n+=(r&a|i&~a)+t[4]-405537848|0,n=(n<<20|n>>>12)+r|0,a+=(n&i|r&~i)+t[9]+568446438|0,a=(a<<5|a>>>27)+n|0,i+=(a&r|n&~r)+t[14]-1019803690|0,i=(i<<9|i>>>23)+a|0,r+=(i&n|a&~n)+t[3]-187363961|0,r=(r<<14|r>>>18)+i|0,n+=(r&a|i&~a)+t[8]+1163531501|0,n=(n<<20|n>>>12)+r|0,a+=(n&i|r&~i)+t[13]-1444681467|0,a=(a<<5|a>>>27)+n|0,i+=(a&r|n&~r)+t[2]-51403784|0,i=(i<<9|i>>>23)+a|0,r+=(i&n|a&~n)+t[7]+1735328473|0,r=(r<<14|r>>>18)+i|0,n+=(r&a|i&~a)+t[12]-1926607734|0,n=(n<<20|n>>>12)+r|0,a+=(n^r^i)+t[5]-378558|0,a=(a<<4|a>>>28)+n|0,i+=(a^n^r)+t[8]-2022574463|0,i=(i<<11|i>>>21)+a|0,r+=(i^a^n)+t[11]+1839030562|0,r=(r<<16|r>>>16)+i|0,n+=(r^i^a)+t[14]-35309556|0,n=(n<<23|n>>>9)+r|0,a+=(n^r^i)+t[1]-1530992060|0,a=(a<<4|a>>>28)+n|0,i+=(a^n^r)+t[4]+1272893353|0,i=(i<<11|i>>>21)+a|0,r+=(i^a^n)+t[7]-155497632|0,r=(r<<16|r>>>16)+i|0,n+=(r^i^a)+t[10]-1094730640|0,n=(n<<23|n>>>9)+r|0,a+=(n^r^i)+t[13]+681279174|0,a=(a<<4|a>>>28)+n|0,i+=(a^n^r)+t[0]-358537222|0,i=(i<<11|i>>>21)+a|0,r+=(i^a^n)+t[3]-722521979|0,r=(r<<16|r>>>16)+i|0,n+=(r^i^a)+t[6]+76029189|0,n=(n<<23|n>>>9)+r|0,a+=(n^r^i)+t[9]-640364487|0,a=(a<<4|a>>>28)+n|0,i+=(a^n^r)+t[12]-421815835|0,i=(i<<11|i>>>21)+a|0,r+=(i^a^n)+t[15]+530742520|0,r=(r<<16|r>>>16)+i|0,n+=(r^i^a)+t[2]-995338651|0,n=(n<<23|n>>>9)+r|0,a+=(r^(n|~i))+t[0]-198630844|0,a=(a<<6|a>>>26)+n|0,i+=(n^(a|~r))+t[7]+1126891415|0,i=(i<<10|i>>>22)+a|0,r+=(a^(i|~n))+t[14]-1416354905|0,r=(r<<15|r>>>17)+i|0,n+=(i^(r|~a))+t[5]-57434055|0,n=(n<<21|n>>>11)+r|0,a+=(r^(n|~i))+t[12]+1700485571|0,a=(a<<6|a>>>26)+n|0,i+=(n^(a|~r))+t[3]-1894986606|0,i=(i<<10|i>>>22)+a|0,r+=(a^(i|~n))+t[10]-1051523|0,r=(r<<15|r>>>17)+i|0,n+=(i^(r|~a))+t[1]-2054922799|0,n=(n<<21|n>>>11)+r|0,a+=(r^(n|~i))+t[8]+1873313359|0,a=(a<<6|a>>>26)+n|0,i+=(n^(a|~r))+t[15]-30611744|0,i=(i<<10|i>>>22)+a|0,r+=(a^(i|~n))+t[6]-1560198380|0,r=(r<<15|r>>>17)+i|0,n+=(i^(r|~a))+t[13]+1309151649|0,n=(n<<21|n>>>11)+r|0,a+=(r^(n|~i))+t[4]-145523070|0,a=(a<<6|a>>>26)+n|0,i+=(n^(a|~r))+t[11]-1120210379|0,i=(i<<10|i>>>22)+a|0,r+=(a^(i|~n))+t[2]+718787259|0,r=(r<<15|r>>>17)+i|0,n+=(i^(r|~a))+t[9]-343485551|0,n=(n<<21|n>>>11)+r|0,e[0]=a+e[0]|0,e[1]=n+e[1]|0,e[2]=r+e[2]|0,e[3]=i+e[3]|0}function n(e){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return a}function r(e){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return a}function i(e){var t,r,i,s,o,l,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)a(u,n(e.substring(t-64,t)));for(e=e.substring(t-64),r=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(a(u,i),t=0;t<16;t+=1)i[t]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),l=parseInt(s[1],16)||0,i[14]=o,i[15]=l,a(u,i),u}function s(e){var t,n,i,s,o,l,c=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)a(u,r(e.subarray(t-64,t)));for(e=t-64<c?e.subarray(t-64):new Uint8Array(0),n=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(a(u,i),t=0;t<16;t+=1)i[t]=0;return s=8*c,s=s.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(s[2],16),l=parseInt(s[1],16)||0,i[14]=o,i[15]=l,a(u,i),u}function o(e){var a,n="";for(a=0;a<4;a+=1)n+=t[e>>8*a+4&15]+t[e>>8*a&15];return n}function l(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var a,n=e.length,r=new ArrayBuffer(n),i=new Uint8Array(r);for(a=0;a<n;a+=1)i[a]=e.charCodeAt(a);return t?i:r}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function p(e,t,a){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),a?n:n.buffer}function f(e){var t,a=[],n=e.length;for(t=0;t<n-1;t+=2)a.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,a)}function h(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==l(i("hello"))&&function(e,t){var a=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(a>>16);return n<<16|65535&a},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(a,n){var r,i,s,o,l=this.byteLength,c=t(a,l),u=l;return n!==e&&(u=t(n,l)),c>u?new ArrayBuffer(0):(r=u-c,i=new ArrayBuffer(r),s=new Uint8Array(i),o=new Uint8Array(this,c,r),s.set(o),i)}}(),h.prototype.append=function(e){return this.appendBinary(c(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,r=this._buff.length;for(t=64;t<=r;t+=64)a(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,a,n=this._buff,r=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(i,r),a=l(this._hash),e&&(a=f(a)),this.reset(),a},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var n,r,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(a(this._hash,e),s=0;s<16;s+=1)e[s]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,a(this._hash,e)},h.hash=function(e,t){return h.hashBinary(c(e),t)},h.hashBinary=function(e,t){var a=i(e),n=l(a);return t?f(n):n},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,n=p(this._buff.buffer,e,!0),i=n.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)a(this._hash,r(n.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,a,n=this._buff,r=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r;t+=1)i[t>>2]|=n[t]<<(t%4<<3);return this._finish(i,r),a=l(this._hash),e&&(a=f(a)),this.reset(),a},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e=h.prototype.getState.call(this);return e.buff=d(e.buff),e},h.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var a=s(new Uint8Array(e)),n=l(a);return t?f(n):n},h}))},"8a60":function(e,t,a){"use strict";var n=a("c7eb"),r=a("1da1"),i=(a("b64b"),a("cee4")),s=a("5c96"),o=a("21a6"),l=a("5f87"),c={401:"认证失败，无法访问系统资源",403:"当前操作没有权限",404:"访问资源不存在",default:"系统未知错误，请反馈给管理员"},u=a("b893"),d="/dashuserver";t["a"]={zip:function(e,t){var a=this,n=s["Loading"].service({text:"正在下载数据，请稍候",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"});Object(i["a"])({method:"get",url:d+e,responseType:"blob",headers:{UserJwtToken:Object(l["a"])()}}).then((function(e){var r=Object(u["a"])(e.data);if(r){var i=new Blob([e.data],{type:"application/zip"});a.saveAs(i,t),n.close()}else a.printErrMsg(e.data),n.close()}))},download:function(e,t,a){var c=s["Loading"].service({text:"正在下载数据，请稍候",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.7)"});Object(i["a"])({method:"get",url:d+e,params:t,headers:{UserJwtToken:Object(l["a"])()}}).then(function(){var e=Object(r["a"])(Object(n["a"])().mark((function e(t){return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"200"===t.data.code?(Object(o["saveAs"])(d+t.data.data,a),c.close()):s["Message"].error(t.data.message);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),s["Message"].error("下载文件出现错误，请重试！"),c.close()}))},saveAs:function(e,t,a){Object(o["saveAs"])(e,t,a)},printErrMsg:function(e){return Object(r["a"])(Object(n["a"])().mark((function t(){var a,r,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.text();case 2:a=t.sent,r=JSON.parse(a),i=c[r.code]||r.msg||c["default"],s["Message"].error(i);case 6:case"end":return t.stop()}}),t)})))()}}},"997a":function(e,t,a){},"9db7":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.icon.includes("el-icon")?a("i",{class:e.icon}):a("svg-icon",{attrs:{"icon-class":e.icon}})},r=[],i={name:"IconShow",props:{icon:{type:String,default:""}}},s=i,o=a("2877"),l=Object(o["a"])(s,n,r,!1,null,"89eff4be",null);t["a"]=l.exports},ad1a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"small",placeholder:"输入文件md5-模糊"},model:{value:e.searchData.fileMd5,callback:function(t){e.$set(e.searchData,"fileMd5",t)},expression:"searchData.fileMd5"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"small",placeholder:"输入原文件名-模糊"},model:{value:e.searchData.fileOldName,callback:function(t){e.$set(e.searchData,"fileOldName",t)},expression:"searchData.fileOldName"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"small",placeholder:"输入扩展名-模糊"},model:{value:e.searchData.fileExtend,callback:function(t){e.$set(e.searchData,"fileExtend",t)},expression:"searchData.fileExtend"}}),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchBtnHandle}},[e._v("查询 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"info",size:"small",icon:"el-icon-refresh"},on:{click:e.resetTableList}},[e._v("显示全部 ")]),a("div",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:"files-zFiles-add",expression:"'files-zFiles-add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.openAdd}},[e._v("新增 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:"files-zFiles-delete",expression:"'files-zFiles-delete'"}],attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.deleteByIds(null)}}},[e._v("删除 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"dataTable",attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleTableSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{label:"文件md5",prop:"fileMd5",align:"center"}}),a("el-table-column",{attrs:{label:"原文件名",prop:"fileOldName",align:"center"}}),a("el-table-column",{attrs:{label:"扩展名",prop:"fileExtend",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"大小",prop:"fileSize",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatSize(t.row.fileSize))+" ")]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",align:"center",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#13ce66"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.openView(t.row)}}},[e._v("详情 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.downloadFile(t.row)}}},[e._v("下载 ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"files-zFiles-delete",expression:"'files-zFiles-delete'"}],staticStyle:{color:"#ff6d6d"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteByIds(t.row)}}},[e._v("删除 ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"total,prev,pager,next,sizes","page-size":e.pager.limit,"current-page":e.pager.page,total:e.pager.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("el-dialog",{key:"upload"+e.dialogIndex,attrs:{title:e.titleMap[e.dialogType],"close-on-click-modal":"view"===e.dialogType,visible:e.dialogFormVisible,width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:function(t){e.loadTableList(),e.resetTemp(),e.dialogIndex++}}},["view"!==e.dialogType?a("div",[a("div",{staticStyle:{"text-align":"center","font-size":"16px","padding-bottom":"20px","margin-bottom":"20px",color:"#2C7EEA","border-bottom":"1px dashed #CCCCCC"}},[e._v(" 上传完成后，关闭窗口，会刷新table数据 ")]),a("file-second",{staticStyle:{"text-align":"center"},attrs:{"second-server-url":"/upload/second/chunks","second-md5-url":"/upload/second/md5","upload-dir":"testSecond","mime-types":".zip,.rar","max-file-size":314572800,"chunk-size":10485760,"is-copy":!0}})],1):a("div",[a("el-form",{ref:"dataForm",attrs:{model:e.temp,"label-position":"right","label-width":"100px",disabled:"view"===e.dialogType}},[a("el-form-item",{attrs:{label:"文件id",prop:"fileId",rules:[{required:!0,message:"文件id不能为空"}]}},[a("el-input",{attrs:{placeholder:"请输入文件id"},model:{value:e.temp.fileId,callback:function(t){e.$set(e.temp,"fileId",t)},expression:"temp.fileId"}})],1),a("el-form-item",{attrs:{label:"文件md5",prop:"fileMd5",rules:[]}},[a("el-input",{attrs:{placeholder:"请输入文件md5"},model:{value:e.temp.fileMd5,callback:function(t){e.$set(e.temp,"fileMd5",t)},expression:"temp.fileMd5"}})],1),a("el-form-item",{attrs:{label:"文件地址（文件访问地址）",prop:"fileUrl",rules:[]}},[a("el-input",{attrs:{placeholder:"请输入文件地址（文件访问地址）"},model:{value:e.temp.fileUrl,callback:function(t){e.$set(e.temp,"fileUrl",t)},expression:"temp.fileUrl"}})],1),a("el-form-item",{attrs:{label:"原文件名",prop:"fileOldName",rules:[]}},[a("el-input",{attrs:{placeholder:"请输入原文件名"},model:{value:e.temp.fileOldName,callback:function(t){e.$set(e.temp,"fileOldName",t)},expression:"temp.fileOldName"}})],1),a("el-form-item",{attrs:{label:"存储文件名",prop:"fileName",rules:[]}},[a("el-input",{attrs:{placeholder:"请输入存储文件名"},model:{value:e.temp.fileName,callback:function(t){e.$set(e.temp,"fileName",t)},expression:"temp.fileName"}})],1),a("el-form-item",{attrs:{label:"文件扩展名",prop:"fileExtend",rules:[]}},[a("el-input",{attrs:{placeholder:"请输入文件扩展名"},model:{value:e.temp.fileExtend,callback:function(t){e.$set(e.temp,"fileExtend",t)},expression:"temp.fileExtend"}})],1),a("el-form-item",{attrs:{label:"文件大小",prop:"fileSize",rules:[{type:"number",message:"必须为数字"}]}},[a("el-input-number",{attrs:{placeholder:"请输入文件大小"},model:{value:e.temp.fileSize,callback:function(t){e.$set(e.temp,"fileSize",e._n(t))},expression:"temp.fileSize"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["view"!==e.dialogType?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.saveData}},[e._v("保存")]):e._e(),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)])],1)},r=[],i=a("5530"),s=(a("e9c4"),a("d81d"),a("b680"),a("6724")),o=a("b775"),l=a("8a60"),c=a("bc82"),u={components:{FileSecond:c["a"]},directives:{waves:s["a"]},data:function(){return{pager:{page:1,limit:10,totalCount:0},tableData:[],searchData:{},tableSelectRows:[],titleMap:{add:"添加文件记录表",update:"修改文件记录表",view:"查看详情"},dialogType:"",dialogFormVisible:!1,temp:{},isLoading:!1,dialogIndex:0}},created:function(){this.loadTableList(),this.resetTemp()},methods:{searchBtnHandle:function(){this.pager.page=1,this.loadTableList()},resetTableList:function(){this.pager.page=1,this.searchData={},this.loadTableList()},loadTableList:function(){var e=this;this.isLoading=!0;var t=Object(i["a"])(Object(i["a"])({},this.pager),{},{params:JSON.stringify(this.searchData)});Object(o["a"])({url:"/files/zFiles/list",method:"get",params:t}).then((function(t){var a=t.data;e.pager.totalCount=a.total,e.tableData=a.records,e.isLoading=!1}))},handleTableSelectChange:function(e){this.tableSelectRows=e},handleCurrentChange:function(e){this.pager.page=e,this.loadTableList()},handleSizeChange:function(e){this.pager.limit=e,this.loadTableList()},resetTemp:function(){this.temp={orderIndex:0}},openAdd:function(){this.resetTemp(),this.dialogFormVisible=!0,this.dialogType="add"},openView:function(e){var t=this;this.temp=Object.assign({},e),this.dialogType="view",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},downloadFile:function(e){l["a"].saveAs(this.$baseServer+e.fileUrl,e.fileOldName)},saveData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=Object(i["a"])({},e.temp);"update"===e.dialogType?Object(o["a"])({url:"/files/zFiles/update",method:"put",data:a}).then((function(t){e.$message({type:"success",message:"修改成功！"}),e.loadTableList(),e.dialogFormVisible=!1})):Object(o["a"])({url:"/files/zFiles/add",method:"post",data:a}).then((function(t){e.$message({type:"success",message:"添加成功！"}),e.loadTableList(),e.dialogFormVisible=!1}))}}))},deleteByIds:function(e){var t=this;e&&(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0)),this.tableSelectRows.length<=0?this.$message({message:"请选择一条数据删除！",type:"warning"}):this.$confirm("确定要删除吗?","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.tableSelectRows.map((function(e){return e.fileId}));Object(o["a"])({url:"/files/zFiles/delete",method:"delete",data:e}).then((function(e){t.$message({type:"success",message:"删除成功！"}),t.loadTableList()}))}))},exportExcel:function(){var e={params:JSON.stringify(this.searchData)};l["a"].download("/files/zFiles/export/excel",e,"文件记录表.xlsx")},importExcelSuccess:function(e){"200"===e.code?(this.$message({type:"success",message:"导入成功！"}),this.loadTableList()):this.$message({type:"error",message:e.message})},formatSize:function(e){var t=e+"B";return t=e>=1073741824?(e/1024/1024/1024).toFixed(2)+"GB":e>=1048576?(e/1024/1024).toFixed(2)+"MB":e>=1024?(e/1024).toFixed(2)+"KB":e+"B",t}}},d=u,p=a("2877"),f=Object(p["a"])(d,n,r,!1,null,null,null);t["default"]=f.exports},bc82:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.uploadData?a("div",[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh",size:"small"},on:{click:e.reloadUpload}},[e._v("重新上传")]),a("div",{staticClass:"uploadDataInfo"},[a("div",[e._v("上传成功 "),a("a",{attrs:{href:e.$baseServer+e.uploadData.fileUrl,target:"_blank"}},[e._v("[点击下载]")]),e._v(" 其他文件信息：")]),a("div",[e._v("原文件名:"+e._s(e.uploadData.fileOldName))]),a("div",[e._v("服务器文件名:"+e._s(e.uploadData.fileName))]),a("div",[e._v("文件扩展名:"+e._s(e.uploadData.fileExtend))]),a("div",[e._v("文件大小:"+e._s(e.formatSize(e.uploadData.fileSize)))]),e.isCopy?a("div",{staticStyle:{color:"#dd1f29"}},[e._v("文件拷贝地址（业务表文件地址）:"+e._s(e.uploadData.copyPath))]):e._e()])],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.uploadData,expression:"!uploadData"}],staticClass:"upload"},[a("label",{staticClass:"fileInputButton",attrs:{for:"fileInput"}},[a("icon-show",{attrs:{icon:"el-icon-plus"}}),e._v(" 选择文件 "),a("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",id:"fileInput",accept:e.mimeTypes},on:{change:e.handleFileChange}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"small"},on:{click:e.submitUpload}},[e._v("开始上传")]),e.currentFile?a("div",{key:e.currentFile.lastModified},[a("h2",[e._v(e._s(e.currentFile.name)+"("+e._s(e.formatSize(e.currentFile.size))+")")]),a("el-progress",{attrs:{"text-inside":!0,"stroke-width":20,percentage:e.percentage,status:"success"}})],1):e._e()],1)])},r=[],i=a("c7eb"),s=a("1da1"),o=(a("a9e3"),a("3ca3"),a("ddb0"),a("fb6a"),a("d3b7"),a("b0c0"),a("b680"),a("caad"),a("2532"),a("69a0")),l=a.n(o),c=a("9db7"),u=a("b893"),d={name:"FileSecond",components:{IconShow:c["a"]},props:{secondServerUrl:{type:String,required:!0,default:"/upload/second/chunks"},secondMd5Url:{type:String,required:!0,default:"/upload/second/md5"},uploadDir:{type:String,default:""},isCopy:{type:Boolean,default:!0},chunkSize:{type:Number,default:1048576},mimeTypes:{type:String,default:".zip"},maxFileSize:{type:Number,default:10485760}},data:function(){return{currentFile:null,percentage:0,uploadData:null}},methods:{reloadUpload:function(){this.$refs.fileInput.value="",this.currentFile=this.uploadData=null,this.percentage=0},handleFileChange:function(e){this.currentFile=null,this.beforeUpload(e.target.files[0])&&(this.currentFile=e.target.files[0])},submitUpload:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getChunkFileMd5(e.currentFile,function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(a){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={secondMd5:a,isCopy:e.isCopy,path:e.uploadDir},e.$request({url:e.secondMd5Url,method:"get",params:n}).then((function(t){"200"===t.code&&t.data?(e.uploadData=t.data,e.percentage=100):(console.log("准备分片上传"),e.chunkFile(e.currentFile,Object(u["b"])()))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},chunkFile:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function n(){var r,o,l;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=Math.ceil(e.size/a.chunkSize),o=Object(i["a"])().mark((function n(o){var l,c,u;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return l=o*a.chunkSize,c=l+a.chunkSize,u=e.slice(l,c),n.next=5,new Promise(function(){var n=Object(s["a"])(Object(i["a"])().mark((function n(l,c){return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getChunkFileMd5(u,function(){var n=Object(s["a"])(Object(i["a"])().mark((function n(d){var p;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return p={chunkMD5:d,chunk:o,chunks:r,name:e.name,uploadId:t,isCopy:a.isCopy,path:a.uploadDir},n.next=3,a.$request({url:a.secondServerUrl,method:"post",params:p,headers:{skipRepeatSubmitCheck:!0}}).then(function(){var n=Object(s["a"])(Object(i["a"])().mark((function n(l){var d;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("200"!==l.code){n.next=10;break}if(null===l.data){n.next=5;break}a.uploadProcess(l.data,o,r),n.next=8;break;case 5:return d={chunk:o,chunks:r,name:e.name,file:u,uploadId:t,isCopy:a.isCopy,path:a.uploadDir},n.next=8,a.$request({url:a.secondServerUrl,method:"post",data:d,headers:{skipRepeatSubmitCheck:!0,"Content-Type":"multipart/form-data"}}).then(function(){var e=Object(s["a"])(Object(i["a"])().mark((function e(t){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"200"===t.code?a.uploadProcess(t.data,o,r):c("上传失败，请重试");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:n.next=11;break;case 10:c("上传失败，请重试");case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 3:l();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(e),l(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}());case 5:case"end":return n.stop()}}),n)})),l=0;case 3:if(!(l<r)){n.next=8;break}return n.delegateYield(o(l),"t0",5);case 5:l++,n.next=3;break;case 8:case"end":return n.stop()}}),n)})))()},uploadProcess:function(e,t,a){e.merged?(this.uploadData=e,this.percentage=100):this.percentage=Number((100*t/a).toFixed(2))},getChunkFileMd5:function(e,t){return Object(s["a"])(Object(i["a"])().mark((function a(){var n,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FileReader,r=new l.a.ArrayBuffer,n.onload=function(e){r.append(e.target.result),t(r.end())},n.onerror=function(){console.error("文件读取出错"),t(null)},n.readAsArrayBuffer(e);case 5:case"end":return a.stop()}}),a)})))()},beforeUpload:function(e){var t=e.name.slice(e.name.lastIndexOf("."));return this.mimeTypes.split(",").includes(t)?!(e.size>this.maxFileSize)||(this.$message.error("文件大小不能超过"+this.formatSize(this.maxFileSize)),!1):(this.$message.error("只能上传"+this.mimeTypes+"格式的文件"),!1)},formatSize:function(e){var t=e+"B";return t=e>=1073741824?(e/1024/1024/1024).toFixed(2)+"GB":e>=1048576?(e/1024/1024).toFixed(2)+"MB":e>=1024?(e/1024).toFixed(2)+"KB":e+"B",t}}},p=d,f=(a("6809"),a("2877")),h=Object(f["a"])(p,n,r,!1,null,"ba800e16",null);t["a"]=h.exports}}]);