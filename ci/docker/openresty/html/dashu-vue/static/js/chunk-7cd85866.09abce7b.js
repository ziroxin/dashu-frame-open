(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cd85866","chunk-0c291c12","chunk-31227190","chunk-2d222146","chunk-2d0d0ba5","chunk-2d237873"],{"0feb":function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"b",(function(){return o})),i.d(t,"e",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return c}));var s=i("b775");function n(){return Object(s["a"])({url:"/permission/treeList",method:"get"})}function o(e){return Object(s["a"])({url:"/permission/add",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/permission/update",method:"post",data:e})}function a(e){return Object(s["a"])({url:"/permission/delete",method:"DELETE",data:e})}function l(e){return Object(s["a"])({url:"/permission/getListById",method:"GET",params:{permissionId:e}})}function c(e){return Object(s["a"])({url:"/permission/updateParentId",method:"post",data:e})}},"68e2":function(e,t,i){"use strict";i.r(t);var s=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"];t["default"]=s},8885:function(e,t,i){},cca1:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.iconName,placement:"top"}},[e.iconName.startsWith("el-icon")?i("i",{class:e.iconName}):i("svg-icon",{attrs:{name:e.iconName,"icon-class":e.iconName}})],1)},n=[],o={name:"EIcon",props:{iconName:{type:String,required:!0}}},r=o,a=i("2877"),l=Object(a["a"])(r,s,n,!1,null,null,null);t["default"]=l.exports},cfc1:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{},[i("div",{staticStyle:{margin:"10px 0px","text-align":"center"}},[e._v(" "+e._s(e.currentPermissionRow.permissionTitle)+"： "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.permissionButtonAdd}}),i("el-button",{attrs:{type:"info",icon:"el-icon-edit",circle:""},on:{click:e.permissionButtonUpdate}}),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:e.permissionButtonDelete}}),i("el-button",{attrs:{type:"warning",icon:"el-icon-close",circle:""},on:{click:e.permissionButtonClose}})],1),i("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.selectionChangeHandlerOrder}},[i("el-table-column",{attrs:{type:"selection",width:"55","header-align":"center",align:"center"}}),i("el-table-column",{attrs:{label:"元素名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("el-tooltip",{key:"tip"+s.permissionId,attrs:{placement:"bottom"}},[i("div",{key:"tipcontent"+s.permissionId,staticStyle:{"line-height":"30px"},attrs:{slot:"content"},slot:"content"},[e._v(" 名称："+e._s(s.permissionTitle)+" 标签："+e._s(s.permissionName)+" "),i("br"),e._v("描述："+e._s(s.permissionDescription)+" ")]),i("div",{staticStyle:{cursor:"pointer"}},[e._v(" "+e._s(s.permissionTitle)+" ")])])]}}])}),i("el-table-column",{attrs:{prop:"permissionOrder",label:"顺序",width:"80",sortable:"",align:"center"}})],1),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],width:"700px",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"650px"},attrs:{model:e.temp,rules:e.rules,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:"名称：",prop:"permissionTitle"}},["update"===this.dialogStatus?i("el-input",{attrs:{placeholder:"按钮名称"},model:{value:e.temp.permissionTitle,callback:function(t){e.$set(e.temp,"permissionTitle",t)},expression:"temp.permissionTitle"}}):i("el-input",{attrs:{placeholder:"按钮名称"},on:{input:function(t){e.temp.permissionDescription=e.currentPermissionRow.permissionTitle+"-"+e.temp.permissionTitle}},model:{value:e.temp.permissionTitle,callback:function(t){e.$set(e.temp,"permissionTitle",t)},expression:"temp.permissionTitle"}})],1),i("el-form-item",{attrs:{label:"标记：",prop:"permissionName"}},[i("el-input",{attrs:{placeholder:"唯一标记-用于控制权限，推荐格式：模块名-按钮名（例：system-menu-add）"},model:{value:e.temp.permissionName,callback:function(t){e.$set(e.temp,"permissionName",t)},expression:"temp.permissionName"}})],1),i("el-form-item",{attrs:{label:"描述：",prop:"permissionDescription"}},[i("el-input",{attrs:{type:"textarea",placeholder:"按钮简介"},model:{value:e.temp.permissionDescription,callback:function(t){e.$set(e.temp,"permissionDescription",t)},expression:"temp.permissionDescription"}})],1),i("el-form-item",{attrs:{label:"类型：",prop:"permissionType"}},[i("el-radio",{attrs:{label:"1"},model:{value:e.temp.permissionType,callback:function(t){e.$set(e.temp,"permissionType",t)},expression:"temp.permissionType"}},[e._v("按钮")]),i("el-radio",{attrs:{label:"3"},model:{value:e.temp.permissionType,callback:function(t){e.$set(e.temp,"permissionType",t)},expression:"temp.permissionType"}},[e._v("其他")])],1),i("el-form-item",{attrs:{label:"图标：",prop:"permissionIcon"}},[i("IconPicker",{model:{value:e.temp.permissionIcon,callback:function(t){e.$set(e.temp,"permissionIcon",t)},expression:"temp.permissionIcon"}})],1),i("el-form-item",{attrs:{label:"顺序：",prop:"permissionOrder"}},[i("el-input-number",{attrs:{min:0},model:{value:e.temp.permissionOrder,callback:function(t){e.$set(e.temp,"permissionOrder",e._n(t))},expression:"temp.permissionOrder"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v("保存")]),i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},n=[],o=(i("14d9"),i("0feb")),r=i("d591"),a={name:"PermissionButton",components:{IconPicker:r["default"]},props:{currentPermissionRow:{type:Object},closeButtonTable:{type:Function}},data:function(){return{tableData:[],total:0,listQuery:{page:1,limit:10},changeData:[],permissionIds:[],dialogStatus:"",textMap:{update:"修改",create:"新增"},dialogFormVisible:!1,apiTableVisible:!1,temp:[],rules:{permissionName:[{required:!0,message:"请填写标记",trigger:"blur"}],permissionTitle:[{required:!0,message:"请填写名称",trigger:"blur"}],permissionOrder:[{required:!0,message:"请填写顺序",trigger:"blur"},{type:"number",message:"请填写数字"}]}}},watch:{currentPermissionRow:function(){this.getList()}},created:function(){this.getList(),this.resetTemp()},methods:{selectionChangeHandlerOrder:function(e){this.changeData=e},getList:function(){var e=this;Object(o["a"])(this.currentPermissionRow.permissionId).then((function(t){e.listLoading=!0,e.tableData=t.data,e.listLoading=!1}))},resetTemp:function(){this.temp={permissionId:"",parentId:this.currentPermissionRow.permissionId,permissionName:"",permissionDescription:"",permissionType:"1",permissionTitle:"",permissionIcon:"",permissionIsShow:!0,permissionIsEnabled:!0,permissionRouter:"",permissionComponent:"",noRedirect:"noRedirect",noCache:!1,breadcrumb:!0,affix:!1,permissionOrder:0}},permissionButtonAdd:function(){var e=this;this.resetTemp(),this.temp.permissionName=this.currentPermissionRow.permissionName+"-",this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&Object(o["b"])(e.temp).then((function(t){e.dialogFormVisible=!1,t.data?(e.$message({type:"success",message:"添加成功！"}),e.getList()):e.$message({type:"error",message:"添加失败！"})}))}))},permissionButtonUpdate:function(){var e=this;if(this.changeData.length<=0)this.$message({message:"请选择一条数据进行修改",type:"warning"});else if(this.changeData.length>1)this.$message({message:"修改时只允许选择一条数据",type:"warning"});else{var t=this.changeData;this.temp=Object.assign({},t[0]),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))}},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&Object(o["e"])(e.temp).then((function(t){e.dialogFormVisible=!1,t.data?(e.$message({type:"success",message:"修改成功！"}),e.getList()):e.$message({type:"error",message:"修改失败！"})}))}))},permissionButtonDelete:function(){var e=this;if(this.changeData.length<=0)this.$message({message:"请选择一条数据进行删除!",type:"warning"});else{var t=this.changeData;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var i=0;i<t.length;i++)e.permissionIds.push(t[i].permissionId);Object(o["c"])(e.permissionIds).then((function(t){t.data?(e.$message({type:"success",message:"删除成功！"}),e.getList()):e.$message({type:"error",message:"删除失败！"})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}},permissionButtonClose:function(){this.closeButtonTable()}}},l=a,c=i("2877"),p=Object(c["a"])(l,s,n,!1,null,"746464e2",null);t["default"]=p.exports},d591:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"IconPickder"},[i("el-popover",{attrs:{width:"600",trigger:"click"}},[i("div",{staticStyle:{"max-height":"400px","overflow-y":"scroll","overflow-x":"hidden"}},e._l(e.iconList,(function(t,s){return i("el-button",{key:s,staticStyle:{margin:"2px"},attrs:{plain:""},on:{click:function(i){e.iconName=t}}},[i("eIcon",{staticStyle:{"font-size":"20px"},attrs:{"icon-name":t}})],1)})),1),i("el-button",{attrs:{slot:"reference"},slot:"reference"},[""===e.iconName?i("span",[e._v("请选择图标")]):i("span",[i("eIcon",{attrs:{"icon-name":e.iconName}})],1)])],1),i("el-button",{directives:[{name:"show",rawName:"v-show",value:""!==e.iconName,expression:"iconName!==''"}],staticStyle:{"margin-left":"5px"},attrs:{type:"text"},on:{click:function(t){e.iconName=""}}},[e._v("清空")])],1)},n=[],o=(i("14d9"),i("cca1")),r=i("fc00"),a=i("68e2"),l={name:"IconPicker",components:{eIcon:o["default"]},props:{value:String},data:function(){return{svgIcons:r["default"],elementIcons:a["default"],iconName:this.value,iconList:[]}},watch:{iconName:function(){this.$emit("input",this.iconName)},value:function(){this.iconName=this.value}},mounted:function(){for(var e=0;e<r["default"].length;e++)this.iconList.push(r["default"][e]);for(var t=0;t<a["default"].length;t++)this.iconList.push("el-icon-"+a["default"][t])}},c=l,p=i("2877"),m=Object(p["a"])(c,s,n,!1,null,null,null);t["default"]=m.exports},e844:function(e,t,i){"use strict";i("8885")},f794:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:e.elColSpanValue}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-menu-add",expression:"'system-menu-add'"}],attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.permissionAdd}},[e._v("新增一级菜单 ")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-menu-delete",expression:"'system-menu-delete'"}],attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:e.permissionDelete}},[e._v("批量删除 ")])],1),i("el-table",{ref:"dataTable",attrs:{data:e.tableData,"row-key":"permissionId",height:this.$windowHeight-200,border:"","tree-props":{children:"children"},"default-expand-all":!0,"highlight-current-row":""},on:{"selection-change":e.selectionChangeHandlerOrder}},[i("el-table-column",{attrs:{type:"selection",width:"50","header-align":"center",align:"center"}}),i("el-table-column",{attrs:{prop:"permissionTitle",label:"菜单名称","min-width":"60%"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("li",{staticClass:"menu-item"},[i("item",{attrs:{icon:s.permissionIcon,title:s.permissionTitle}}),"0"===s.permissionType?i("el-tag",{attrs:{"disable-transitions":"",size:"mini"}},[e._v("路由")]):e._e(),"2"===s.permissionType?i("el-tag",{attrs:{"disable-transitions":"",type:"success",size:"mini"}},[e._v("外链")]):e._e(),s.permissionIsShow?e._e():i("el-tag",{attrs:{"disable-transitions":"",type:"danger",size:"mini"}},[e._v("隐藏")]),s.permissionIsEnabled?e._e():i("el-tag",{attrs:{"disable-transitions":"",type:"danger",size:"mini"}},[e._v("禁用")]),e.buttonTableVisible?e._e():i("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-menu-update-parent",expression:"'system-menu-update-parent'"}],attrs:{type:"text",plain:"",icon:"el-icon-sort",size:"mini"},on:{click:function(t){return e.permissionUpdateParent(s)}}}),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"system-menu-update",expression:"'system-menu-update'"}],attrs:{type:"text",plain:"",size:"mini"},on:{click:function(t){return e.permissionUpdate(s)}}},[e._v("修改 ")]),"0"===s.permissionType?i("el-button",{attrs:{type:"text",plain:"",size:"mini"},on:{click:function(t){return e.subordinatesAdd(s)}}},[e._v("添加下级 ")]):e._e()],1),e.buttonTableVisible?e._e():i("div",{staticStyle:{float:"right"}},[i("el-tag",{attrs:{type:"info",size:"mini"}},[e._v(e._s(s.permissionOrder))])],1)],1)]}}])}),i("el-table-column",{attrs:{prop:"permissionRouter",label:"菜单详情",width:"200","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return["0"===s.permissionType?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"left"}},[i("div",{key:"tipcontent"+s.permissionId,staticStyle:{"line-height":"30px"},attrs:{slot:"content"},slot:"content"},[e._v(" 菜单标记："+e._s(s.permissionName)+" "),i("br"),e._v("菜单地址："+e._s(s.permissionRouter)+" "),i("br"),e._v("组件地址："+e._s(s.permissionComponent)+" "),i("br"),e._v("noRedirect: "+e._s(s.noRedirect)+" "),i("br"),e._v("noCache: "+e._s(s.noCache)+" "),i("br"),e._v("breadcrumb: "+e._s(s.breadcrumb)+" "),i("br"),e._v("affix: "+e._s(s.affix)+" "),i("br"),e._v("activeMenu: "+e._s(s.activeMenu)+" ")]),i("el-button",[e._v(e._s(s.permissionRouter))])],1):i("a",{staticStyle:{"text-decoration":"underline",color:"#1890ff"},attrs:{href:s.permissionRouter,target:"_blank"}},[e._v(e._s(s.permissionRouter))])]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[i("div",[s.permissionIsEnabled?i("el-button",{attrs:{type:"text",plain:"",size:"mini"},on:{click:function(t){return e.changeIsEnabled(s,!1)}}},[e._v("禁用 ")]):i("el-button",{attrs:{type:"text",plain:"",size:"mini"},on:{click:function(t){return e.changeIsEnabled(s,!0)}}},[e._v("启用")]),"2"!==s.permissionType?i("el-button",{attrs:{type:"text",plain:"",size:"mini"},on:{click:function(t){return e.openButtonTable(s)}}},[e._v("按钮 ")]):e._e()],1)]}}])})],1)],1),e.buttonTableVisible?i("el-col",{style:e.rightStyle,attrs:{span:8}},[i("PermissionButton",{attrs:{"current-permission-row":e.currentPermissionRow,"close-button-table":e.closeButtonTable}})],1):e._e()],1),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"700px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"dataForm",staticStyle:{width:"600px","margin-left":"30px"},attrs:{model:e.temp,rules:e.rules,"label-position":"right","label-width":"110px"}},[i("el-form-item",{attrs:{label:"菜单类型：",prop:"permissionType"}},[i("el-radio",{attrs:{label:"0"},on:{change:function(t){e.routerShow=!0}},model:{value:e.temp.permissionType,callback:function(t){e.$set(e.temp,"permissionType",t)},expression:"temp.permissionType"}},[e._v("路由")]),i("el-radio",{attrs:{label:"2"},on:{change:function(t){e.routerShow=!1}},model:{value:e.temp.permissionType,callback:function(t){e.$set(e.temp,"permissionType",t)},expression:"temp.permissionType"}},[e._v("外链")])],1),i("el-form-item",{attrs:{label:"菜单名称：",prop:"permissionTitle"}},[i("el-input",{attrs:{placeholder:"菜单显示名称"},model:{value:e.temp.permissionTitle,callback:function(t){e.$set(e.temp,"permissionTitle",t)},expression:"temp.permissionTitle"}})],1),e.routerShow?i("el-form-item",{attrs:{label:"菜单标记：",prop:"permissionName"}},[i("el-input",{attrs:{placeholder:"唯一标记-用于控制权限，推荐格式：父包-模块（例：system-menu）"},model:{value:e.temp.permissionName,callback:function(t){e.$set(e.temp,"permissionName",t)},expression:"temp.permissionName"}})],1):e._e(),i("el-form-item",{attrs:{label:"菜单描述：",prop:"permissionDescription"}},[i("el-input",{attrs:{type:"textarea",placeholder:"菜单功能简介"},model:{value:e.temp.permissionDescription,callback:function(t){e.$set(e.temp,"permissionDescription",t)},expression:"temp.permissionDescription"}})],1),i("el-form-item",{attrs:{label:"菜单图标：",prop:"permissionIcon"}},[i("IconPicker",{model:{value:e.temp.permissionIcon,callback:function(t){e.$set(e.temp,"permissionIcon",t)},expression:"temp.permissionIcon"}})],1),i("el-form-item",{attrs:{label:"菜单地址：",prop:"permissionRouter"}},[e.routerShow?i("el-input",{attrs:{placeholder:"菜单地址，不含/index（例：/system/menu）"},on:{input:function(t){e.temp.permissionComponent=e.temp.permissionRouter+"/index"}},model:{value:e.temp.permissionRouter,callback:function(t){e.$set(e.temp,"permissionRouter",t)},expression:"temp.permissionRouter"}}):i("el-input",{attrs:{placeholder:"外链以 http:// 或 https:// 开头"},model:{value:e.temp.permissionRouter,callback:function(t){e.$set(e.temp,"permissionRouter",t)},expression:"temp.permissionRouter"}})],1),e.routerShow?i("el-form-item",{attrs:{label:"组件地址：",prop:"permissionComponent"}},[i("el-input",{attrs:{placeholder:"组件完整地址（例：/system/menu/index）"},model:{value:e.temp.permissionComponent,callback:function(t){e.$set(e.temp,"permissionComponent",t)},expression:"temp.permissionComponent"}}),i("el-tag",{attrs:{type:"info"}},[e._v("根节点请填写：/layout/index")])],1):e._e(),e.routerShow?i("el-form-item",{attrs:{label:"是否显示：",prop:"permissionIsShow"}},[i("el-switch",{attrs:{"active-value":!0,"active-text":"显示","inactive-value":!1,"inactive-text":"隐藏"},model:{value:e.temp.permissionIsShow,callback:function(t){e.$set(e.temp,"permissionIsShow",t)},expression:"temp.permissionIsShow"}})],1):e._e(),e.routerShow&&!e.temp.permissionIsShow?i("el-form-item",{attrs:{label:"activeMenu：",prop:"activeMenu"}},[i("el-input",{attrs:{placeholder:"本路由hidden时，请填写菜单栏高亮显示的路由"},model:{value:e.temp.activeMenu,callback:function(t){e.$set(e.temp,"activeMenu",t)},expression:"temp.activeMenu"}})],1):e._e(),e.routerShow?i("el-form-item",{attrs:{label:"redirect：",prop:"noRedirect"}},[i("el-switch",{attrs:{"active-value":"noRedirect","active-text":"NoRedirect","inactive-value":"","inactive-text":"否"},model:{value:e.temp.noRedirect,callback:function(t){e.$set(e.temp,"noRedirect",t)},expression:"temp.noRedirect"}}),i("el-tag",{staticStyle:{"margin-left":"20px"},attrs:{type:"info"}},[e._v("等于noRedirect时,在面包屑导航不可点击")])],1):e._e(),e.routerShow?i("el-form-item",{attrs:{label:"noCache：",prop:"noCache"}},[i("el-switch",{attrs:{"active-value":!0,"active-text":"TRUE","inactive-value":!1,"inactive-text":"FALSE"},model:{value:e.temp.noCache,callback:function(t){e.$set(e.temp,"noCache",t)},expression:"temp.noCache"}}),i("el-tag",{staticStyle:{"margin-left":"20px"},attrs:{type:"info"}},[e._v("默认false,为true时不被keep-alive缓存")])],1):e._e(),e.routerShow?i("el-form-item",{attrs:{label:"breadcrumb：",prop:"breadcrumb"}},[i("el-switch",{attrs:{"active-value":!0,"active-text":"TRUE","inactive-value":!1,"inactive-text":"FALSE"},model:{value:e.temp.breadcrumb,callback:function(t){e.$set(e.temp,"breadcrumb",t)},expression:"temp.breadcrumb"}}),i("el-tag",{staticStyle:{"margin-left":"20px"},attrs:{type:"info"}},[e._v("默认true,为false时不在面包屑中显示")])],1):e._e(),e.routerShow?i("el-form-item",{attrs:{label:"affix：",prop:"affix"}},[i("el-switch",{attrs:{"active-value":!0,"active-text":"TRUE","inactive-value":!1,"inactive-text":"FALSE"},model:{value:e.temp.affix,callback:function(t){e.$set(e.temp,"affix",t)},expression:"temp.affix"}}),i("el-tag",{staticStyle:{"margin-left":"20px"},attrs:{type:"info"}},[e._v("默认false,为true时固定在标签里")])],1):e._e(),i("el-form-item",{attrs:{label:"菜单顺序：",prop:"permissionOrder"}},[i("el-input-number",{attrs:{min:0},model:{value:e.temp.permissionOrder,callback:function(t){e.$set(e.temp,"permissionOrder",e._n(t))},expression:"temp.permissionOrder"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitJudgment(e.dialogStatus)}}},[e._v("保存")]),i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1),i("el-dialog",{attrs:{title:"修改上下级",visible:e.parentDialogVisible,width:"400px"},on:{"update:visible":function(t){e.parentDialogVisible=t}}},[i("el-form",{ref:"parentDataForm",attrs:{model:e.temp2}},["-1"===e.temp2.parentId?i("el-button",{attrs:{type:"danger"}},[e._v("已选择顶级")]):i("el-button",{on:{click:function(t){return e.handleNodeClick("-1")}}},[e._v("顶级")]),i("el-divider",{attrs:{"content-position":"center"}},[e._v("请选择父级菜单")]),i("el-tree",{key:e.temp2.permissionId,ref:"parentTree",attrs:{data:e.tableData,props:{children:"children",label:"permissionTitle"},"highlight-current":!0,"default-expand-all":!0,"expand-on-click-node":!1,"node-key":"permissionId","current-node-key":e.temp2.parentId},on:{"update:currentNodeKey":function(t){return e.$set(e.temp2,"parentId",t)},"update:current-node-key":function(t){return e.$set(e.temp2,"parentId",t)},"node-click":e.handleNodeClick}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitPermissionParent}},[e._v("保存")]),i("el-button",{on:{click:function(t){e.parentDialogVisible=!1}}},[e._v("取消")])],1)],1)],1)},n=[],o=i("5530"),r=i("c7eb"),a=i("1da1"),l=(i("14d9"),i("0feb")),c=i("d591"),p=i("cfc1"),m=i("837c"),u=i("b775"),d={components:{IconPicker:c["default"],PermissionButton:p["default"],Item:m["a"]},data:function(){return{tableData:[],total:0,listQuery:{page:1,limit:10},changeData:[],permissionIds:[],currentPermissionRow:"",dialogStatus:"",textMap:{update:"修改",create:"新增",subordinates:"添加下级"},dialogFormVisible:!1,buttonTableVisible:!1,elColSpanValue:24,temp:{},rules:{permissionTitle:[{required:!0,message:"请填写菜单名称",trigger:"blur"}],permissionName:[{required:!0,message:"请填写菜单标记",trigger:"blur"}],permissionRouter:[{required:!0,message:"请填写路由地址",trigger:"blur"}],permissionComponent:[{required:!0,message:"请填写组件地址",trigger:"blur"}],permissionOrder:[{required:!0,message:"请填写菜单顺序",trigger:"blur"},{type:"number",message:"请填写数字"}]},routerShow:!0,temp2:{},parentDialogVisible:!1}},computed:{rightStyle:function(){return"background-color:#f6f6f6;border-radius:5px;height:"+(window.innerHeight-125)+"px;"}},created:function(){this.getPermissionTreeList(),this.resetTemp()},methods:{toggleRouterShow:function(e){this.routerShow="0"===e},getPermissionTreeList:function(){var e=this;return Object(a["a"])(Object(r["a"])().mark((function t(){var i,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.next=3,Object(l["d"])();case 3:i=t.sent,s=i.data,e.tableData=s,e.listLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},resetTemp:function(){this.temp={permissionId:"",parentId:"-1",permissionName:"",permissionDescription:"",permissionType:"0",permissionTitle:"",permissionIcon:"",permissionRouter:"",permissionComponent:"",permissionIsEnabled:!0,permissionIsShow:!0,noRedirect:"noRedirect",noCache:!1,breadcrumb:!0,affix:!1,permissionOrder:0}},getList:function(){var e=this;Object(l["d"])().then((function(t){e.tableData=t.data,e.total=t.data.length}))},selectionChangeHandlerOrder:function(e){this.changeData=e},permissionAdd:function(){var e=this;this.resetTemp(),this.dialogFormVisible=!0,this.dialogStatus="create",this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&("noRedirect"!==e.temp.noRedirect&&(e.temp.noRedirect=e.temp.permissionRouter),Object(l["b"])(e.temp).then((function(t){e.dialogFormVisible=!1,t.data?(e.$message({type:"success",message:"添加成功！"}),e.getPermissionTreeList()):e.$message({type:"error",message:"添加失败！"})})))}))},permissionUpdate:function(e){var t=this;e&&(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0)),this.changeData.length<=0?this.$message({message:"请选择一条数据进行修改！",type:"warning"}):this.changeData.length>1?this.$message({message:"修改时只允许选择一条数据！",type:"warning"}):(this.temp=Object.assign({},this.changeData[0]),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.routerShow="0"===t.temp.permissionType,t.$refs["dataForm"].clearValidate()})))},permissionUpdateParent:function(e){var t=this;if(e&&(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0)),this.changeData.length<=0)this.$message({message:"请选择一条数据进行修改！",type:"warning"});else if(this.changeData.length>1)this.$message({message:"修改时只允许选择一条数据！",type:"warning"});else{var i=this.changeData;this.temp2=Object.assign({},i[0]),this.parentDialogVisible=!0,this.$nextTick((function(){t.$refs["parentDataForm"].clearValidate()}))}},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&("noRedirect"!==e.temp.noRedirect&&(e.temp.noRedirect=e.temp.permissionRouter),Object(l["e"])(e.temp).then((function(t){e.dialogFormVisible=!1,t.data?(e.$message({type:"success",message:"修改成功！"}),e.getPermissionTreeList()):e.$message({type:"error",message:"修改失败！"})})))}))},permissionDelete:function(){var e=this;if(this.changeData.length<=0)this.$message({message:"请选择一条数据进行删除！",type:"warning"});else{var t=this.changeData;this.$confirm("永久删除菜单无法恢复，确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$confirm("会同时删除子元素（按钮等），确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var i=0;i<t.length;i++)e.permissionIds.push(t[i].permissionId);Object(l["c"])(e.permissionIds).then((function(t){t.data?(e.$message({type:"success",message:"删除成功！"}),e.getPermissionTreeList()):e.$message({type:"error",message:"删除失败！"})}))}))}))}},subordinatesAdd:function(e){var t=this;"1"===e.permissionType?this.$message({message:"按钮无法添加下级！",type:"warning"}):(this.resetTemp(),this.temp=Object(o["a"])(Object(o["a"])({},this.temp),{},{parentId:e.permissionId,permissionName:e.permissionName+"-",permissionRouter:e.permissionRouter+"/"}),this.dialogFormVisible=!0,this.dialogStatus="subordinates",this.$nextTick((function(){t.$refs["dataForm"].clearValidate()})))},changeIsEnabled:function(e,t){var i=this,s={permissionId:e.permissionId,permissionIsEnabled:t};Object(u["a"])({url:"/permission/changeIsEnabled",method:"post",data:s}).then((function(e){i.$message({type:"success",message:t?"启用菜单成功！":"禁用菜单成功！"}),i.getPermissionTreeList()}))},submitJudgment:function(e){"update"===e?this.updateData():this.createData()},openButtonTable:function(e){this.buttonTableVisible=!0,this.elColSpanValue=16,this.currentPermissionRow=e},closeButtonTable:function(){this.buttonTableVisible=!1,this.elColSpanValue=24},handleNodeClick:function(e){"-1"===e?(this.temp2.parentId="-1",this.$refs.parentTree.setCurrentKey(null)):this.temp2.parentId=e.permissionId},submitPermissionParent:function(){var e=this;Object(l["f"])(this.temp2).then((function(t){e.parentDialogVisible=!1,t.data?(e.$message({type:"success",message:"修改成功！"}),e.getPermissionTreeList()):e.$message({type:"error",message:"修改失败！"})}))}}},h=d,f=(i("e844"),i("2877")),g=Object(f["a"])(h,s,n,!1,null,null,null);t["default"]=g.exports},fc00:function(e,t,i){"use strict";i.r(t);i("d3b7"),i("ddb0"),i("d81d"),i("ac1f"),i("466d");var s=i("51ff"),n=function(e){return e.keys()},o=/\.\/(.*)\.svg/,r=n(s).map((function(e){return e.match(o)[1]}));t["default"]=r}}]);