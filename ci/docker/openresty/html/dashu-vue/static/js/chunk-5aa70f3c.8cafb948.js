(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aa70f3c","chunk-17a57422"],{"32b1":function(t,e,n){},"5cbe":function(t,e,n){"use strict";n("66c6")},"65f4":function(t,e,n){t.exports=n.p+"static/img/loginbg.93e8464b.jpg"},"66c6":function(t,e,n){},"9ed6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loginBody",style:"background-image: url('"+t.loginBg[t.loginBgIndex]+"');"},[n("main",{staticClass:"d-flex align-items-center min-vh-100 py-3 py-md-0"},[n("div",{staticClass:"container"},[n("div",{staticClass:"card login-card"},[n("div",{staticClass:"row no-gutters"},[n("div",{staticClass:"col-md-5"},[n("img",{staticClass:"login-card-img",attrs:{src:t.loginBg[t.loginBgIndex],alt:"login"},on:{error:t.handleImageError}}),n("div",{staticClass:"toggle-login-bg"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"换一批",placement:"top"}},[n("i",{staticClass:"el-icon-refresh",on:{click:function(e){return t.loadRemoteWallpaper(!0)}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上一张",placement:"top"}},[n("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){return t.toggleLoginBg(2)}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下一张",placement:"top"}},[n("i",{staticClass:"el-icon-arrow-right",on:{click:function(e){return t.toggleLoginBg(1)}}})])],1)]),n("div",{staticClass:"col-md-7"},[n("div",{staticClass:"card-body login-container"},[t.logo?n("div",{staticClass:"brand-wrapper"},[n("img",{staticClass:"logo",attrs:{src:t.logo,alt:"logo"}})]):t._e(),n("p",{staticClass:"login-card-description"},[t._v(t._s(t.title))]),n("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.loginRules,autocomplete:"on","label-position":"left"}},[n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1),n("el-input",{ref:"username",attrs:{placeholder:"请输入用户名",name:"userName",type:"text",tabindex:"1",autocomplete:"on"},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName",e)},expression:"loginForm.userName"}})],1),n("el-tooltip",{attrs:{content:"大写已打开",placement:"right",manual:""},model:{value:t.capsTooltip,callback:function(e){t.capsTooltip=e},expression:"capsTooltip"}},[n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1),n("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(e){t.capsTooltip=!1}},nativeOn:{keyup:[function(e){return t.checkCapslock.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}]},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),n("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[n("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1)],1),n("el-form-item",{attrs:{prop:"yzm"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"example"}})],1),n("el-input",{ref:"yzm",staticClass:"yzmInput",attrs:{placeholder:"请输入验证码",name:"yzm",type:"text",tabindex:"3",autocomplete:"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.yzm,callback:function(e){t.$set(t.loginForm,"yzm",e)},expression:"loginForm.yzm"}}),n("img",{staticClass:"yzmImg",attrs:{src:t.loginForm.codeBaseImage},on:{click:t.loadCaptacha}})],1),n("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t._v("登 录 ")])],1),n("a",{staticClass:"forgot-password-link",attrs:{href:"#!"}},[t._v("忘记密码?")]),n("a",{staticClass:"forgot-password-link thirdparty-button",attrs:{href:"#!"},on:{click:function(e){t.showDialog=!0}}},[t._v("其他登录")]),t._m(0)],1)])])])])]),n("el-dialog",{attrs:{title:"第三方登录",visible:t.showDialog,"append-to-body":!0,top:"30vh"},on:{"update:visible":function(e){t.showDialog=e}}},[n("social-sign")],1)],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"login-card-footer-text"},[t._v("还没有账号? "),n("a",{staticClass:"text-reset",attrs:{href:"#!"}},[t._v("立即注册")])])}],i=n("5530"),s=(n("14d9"),n("13d5"),n("d3b7"),n("b64b"),n("e9c4"),n("c62e")),r=n("2f62"),l=n("b775"),c=n("9816"),g="MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCdSR523juSOUKRfyCwxLMnueQ5HbFH3ORgSzsIFIuz40lUIeZqRPjNkFFBbV159XQfXGs0pfoX68Y+ylTdWaCCeHHxNjx+qVkAE9tMyosxDXSUj+Yz8ruZA920u0ne2VSVZd41AtrlLaM8DaFVOfC7dngFx12rosfSlxrx0yPU8wIDAQAB";function u(t){var e=new c["a"];e.setPublicKey(g);var n=e.encrypt(t);return n}var d=n("c7eb"),p=n("1da1"),f=n("cee4");function h(t,e,n,a){return new Promise(function(){var o=Object(p["a"])(Object(d["a"])().mark((function o(i,s){return Object(d["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:Object(f["a"])({url:"http://service.picasso.adesk.com/v1/vertical/category/"+(t||"4fb47a305ba1c60ca5000223")+"/vertical?limit="+(n||20)+"&skip="+(a||0)+"&adult=true&first=0&order="+(e||"hot"),method:"get"}).then((function(t){i(t.data.res.vertical)}));case 1:case"end":return o.stop()}}),o)})));return function(t,e){return o.apply(this,arguments)}}())}var m=n("a78e"),v=n.n(m),y={name:"Login",computed:Object(i["a"])({},Object(r["c"])({title:function(t){return t.settings.title}})),components:{SocialSign:s["default"]},data:function(){return{loginBg:[n("65f4"),n("e23d"),n("c643")],logo:n("9d64"),loginBgIndex:0,loginForm:{userName:"admin",password:"qwer@123",yzm:"",codeUuid:"",codeBaseImage:""},loginRules:{userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],yzm:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},intervalIndex:0,autoRefresh:!1}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},mounted:function(){""===this.loginForm.userName?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus(),this.loadCaptacha(),this.autoRefreshLoginBg(),this.loadRemoteWallpaper()},destroyed:function(){clearInterval(this.intervalIndex)},methods:{checkCapslock:function(t){var e=t.key;this.capsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},toggleLoginBg:function(t){this.loginBgIndex=1===t?this.loginBgIndex>=this.loginBg.length-1?0:this.loginBgIndex+1:0===this.loginBgIndex?this.loginBg.length-1:this.loginBgIndex-1,this.autoRefresh&&this.autoRefreshLoginBg()},autoRefreshLoginBg:function(){var t=this;clearInterval(this.intervalIndex),this.intervalIndex=setInterval((function(){t.toggleLoginBg(1)}),1e4),this.autoRefresh=!0},showPwd:function(){var t=this;this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0;var n=Object(i["a"])({},t.loginForm);n.isEncrypt=!0,n.userName=u(t.loginForm.userName),n.password=u(t.loginForm.password),t.$store.dispatch("user/login",n).then((function(){t.$request({url:"/userTheme/zUserTheme/getByUser",method:"get"}).then((function(e){var n=e.data;n&&(v.a.set("settings",n,{expires:new Date("9999-12-31T23:59:59")}),location.reload()),t.$router.push({path:t.redirect||"/",query:t.otherQuery}),t.loading=!1}))})).catch((function(){console.log("login error!"),t.loadCaptacha(),t.loading=!1}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,n){return"redirect"!==n&&(e[n]=t[n]),e}),{})},loadCaptacha:function(){var t=this;Object(l["a"])({url:"/captcha/get",method:"get"}).then((function(e){var n=e.data;t.loginForm.codeUuid=n.codeUuid,t.loginForm.codeBaseImage=n.codeBaseImage}))},loadRemoteWallpaper:function(t){var e=this;try{var n=0;t&&(v.a.remove("loginBgData"),n=parseInt(v.a.get("loginBgDataSkip"))+1||0);var a=v.a.get("loginBgData");a?this.loginBg=JSON.parse(a):h(null,"hot",20,20*n).then((function(t){if(t&&t.length>0){e.loginBg=[];for(var a=0;a<t.length;a++)e.loginBg.push(t[a].img);v.a.set("loginBgData",JSON.stringify(e.loginBg)),v.a.set("loginBgDataSkip",n)}}))}catch(o){console.log(o)}},handleImageError:function(t){t.target.src=n("65f4")}}},b=y,w=(n("fe0b"),n("e7b8"),n("5cbe"),n("2877")),C=Object(w["a"])(b,a,o,!1,null,"43e0cd5e",null);e["default"]=C.exports},aec1:function(t,e,n){},c62e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"social-signup-container"},[n("el-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary"},on:{click:t.oauth2HandleClick}},[t._v(" Oauth2统一认证登录 ")]),n("div",{staticClass:"sign-btn",on:{click:function(e){return t.wechatHandleClick("wechat")}}},[n("span",{staticClass:"wx-svg-container"},[n("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),t._v(" WeChat ")]),n("div",{staticClass:"sign-btn",on:{click:function(e){return t.tencentHandleClick("tencent")}}},[n("span",{staticClass:"qq-svg-container"},[n("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),t._v(" QQ ")])],1)},o=[],i={name:"SocialSignin",methods:{wechatHandleClick:function(){alert("ok")},tencentHandleClick:function(){alert("ok")},oauth2HandleClick:function(){location.href="http://localhost:8123/oauth/authorize?response_type=code&client_id=dev&redirect_uri=http%3A%2F%2Flocalhost%3A8123%2Foauth2%2Fclient%2Flogin%2Fcode&state=my_state"}}},s=i,r=(n("db46"),n("2877")),l=Object(r["a"])(s,a,o,!1,null,"3e6f5cd6",null);e["default"]=l.exports},c643:function(t,e,n){t.exports=n.p+"static/img/loginbg2.1d229561.jpg"},db46:function(t,e,n){"use strict";n("f2bb")},e23d:function(t,e,n){t.exports=n.p+"static/img/loginbg1.7b620b12.jpg"},e7b8:function(t,e,n){"use strict";n("aec1")},f2bb:function(t,e,n){},fe0b:function(t,e,n){"use strict";n("32b1")}}]);