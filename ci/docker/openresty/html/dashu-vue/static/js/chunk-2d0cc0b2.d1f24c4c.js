(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc0b2"],{"4bf4":function(t,a,e){"use strict";e.r(a);var r,i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.tradeId?e("div",[t._v(" 正在验证支付结果，请稍后... （这里可以弹窗，让用户确认，是否支付成功） "),e("br"),t._v("示例： "),e("img",{attrs:{src:"https://pay.weixin.qq.com/wiki/doc/api/img/chapter15_4_5.jpg"}})]):e("div",{staticStyle:{margin:"20px"}},[e("h1",[t._v("H5（非微信客户端）支付")]),e("el-form",{ref:"dataForm",attrs:{"label-position":"right","label-width":"100px"}},[e("el-form-item",{attrs:{label:"支付金额",prop:"totalFee"}},[e("el-input-number",{attrs:{placeholder:"请输入支付金额"},model:{value:t.payData.totalFee,callback:function(a){t.$set(t.payData,"totalFee",a)},expression:"payData.totalFee"}}),e("span",{staticStyle:{"margin-left":"20px",color:"red"}},[t._v("(单位：分)")])],1)],1),e("div",{staticStyle:{margin:"20px 100px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.payRedirect}},[t._v("立即支付")]),e("el-button",{attrs:{type:"primary"},on:{click:t.clearBack}},[t._v("返回")])],1)],1)},c=[],n=e("5530"),o=(e("b64b"),e("ac1f"),e("5319"),{name:"WechatH5Pay",data:function(){return{payData:{productId:"xxxx-xxxx-xx-x",productName:"测试商品",totalFee:1,attach:""},payRedirectUrl:"",tradeId:this.$route.query.tradeId}},mounted:function(){this.tradeId?this.wechatPayUpdateStatus(this.tradeIdtradeId):this.init()},methods:{init:function(){var t=this;this.payData=Object(n["a"])({},JSON.parse(window.sessionStorage.getItem("payData")));var a=Object(n["a"])({},this.payData);this.$request({url:"/pay/wechat/getPayH5",method:"post",data:a}).then((function(a){t.payRedirectUrl=a.data.h5Url+"&redirect_url="+encodeURI(location.href+"?tradeId="+a.data.tradeId)}))},payRedirect:function(){location.href=this.payRedirectUrl},wechatPayUpdateStatus:function(t){var a=this,e={tradeId:t};r=setInterval((function(){a.$request({url:"/pay/wechat/getPayResult",method:"get",params:e}).then((function(t){1===t.data.tradeStatus&&(a.$message({type:"success",message:"您已支付成功!",duration:5e3,showClose:!0}),a.clearBack())}))}),2e3)},clearBack:function(){clearInterval(r),this.$router.replace("/demo/trade")}}}),s=o,d=e("2877"),l=Object(d["a"])(s,i,c,!1,null,null,null);a["default"]=l.exports}}]);