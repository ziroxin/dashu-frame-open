(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f011229e"],{"09be":function(t,e,o){},"61a1":function(t,e,o){"use strict";o("9b60")},"624a":function(t,e,o){"use strict";o("09be")},"9b60":function(t,e,o){},"9ed6":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"loginBody",style:"background-image: url('"+t.loginBg[t.loginBgIndex]+"');"},[e("main",{staticClass:"d-flex align-items-center min-vh-100 py-3 py-md-0"},[e("div",{staticClass:"container"},[e("div",{staticClass:"card login-card"},[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-md-5"},[e("img",{staticClass:"login-card-img",attrs:{src:t.loginBg[t.loginBgIndex],alt:"login"},on:{error:t.handleImageError}}),e("div",{staticClass:"toggle-login-bg"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"换一批",placement:"top"}},[e("i",{staticClass:"el-icon-refresh",on:{click:function(e){return t.loadRemoteWallpaper(!0)}}})]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上一张",placement:"top"}},[e("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){return t.toggleLoginBg(2)}}})]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下一张",placement:"top"}},[e("i",{staticClass:"el-icon-arrow-right",on:{click:function(e){return t.toggleLoginBg(1)}}})])],1)]),e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"card-body login-container"},[t.logo?e("div",{staticClass:"brand-wrapper"},[e("img",{staticClass:"logo",attrs:{src:t.logo,alt:"logo"}})]):t._e(),e("p",{staticClass:"login-card-description"},[t._v(t._s(t.title))]),e("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.loginRules,autocomplete:"off","label-position":"left"}},[e("el-form-item",{attrs:{prop:"userName"}},[e("el-input",{ref:"userName",attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名",name:"userName",type:"text",tabindex:"1",autocomplete:"off"},model:{value:t.loginForm.userName,callback:function(e){t.$set(t.loginForm,"userName",e)},expression:"loginForm.userName"}})],1),e("el-tooltip",{attrs:{content:"大写已打开",placement:"right",manual:""},model:{value:t.capsTooltip,callback:function(e){t.capsTooltip=e},expression:"capsTooltip"}},[e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{ref:"password",attrs:{"prefix-icon":"el-icon-lock",type:"password","show-password":"",placeholder:"请输入密码",name:"password",tabindex:"2",autocomplete:"off"},on:{blur:function(e){t.capsTooltip=!1}},nativeOn:{keyup:[function(e){return t.checkCapslock.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}]},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1)],1),e("el-form-item",{attrs:{prop:"yzm"}},[e("el-input",{ref:"yzm",staticClass:"yzmInput",attrs:{"prefix-icon":"el-icon-help",placeholder:"请输入验证码",name:"yzm",type:"text",tabindex:"3",autocomplete:"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin.apply(null,arguments)}},model:{value:t.loginForm.yzm,callback:function(e){t.$set(t.loginForm,"yzm",e)},expression:"loginForm.yzm"}}),e("img",{staticClass:"yzmImg",attrs:{src:t.loginForm.codeBaseImage},on:{click:t.loadCaptcha}})],1),e("div",{staticClass:"remember-me"},[e("el-checkbox",{attrs:{label:"记住密码"},model:{value:t.loginForm.rememberMe,callback:function(e){t.$set(t.loginForm,"rememberMe",e)},expression:"loginForm.rememberMe"}},[t._v("记住密码")]),e("div",[e("a",{staticClass:"forgot-password-link",attrs:{href:"#!"}},[t._v("忘记密码？")])])],1),e("el-button",{staticStyle:{width:"100%"},attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin.apply(null,arguments)}}},[t._v("登 录 ")])],1),t._m(0),e("p",{staticClass:"login-card-footer-text"},[t.isRegisterOpen?[e("span",{staticStyle:{color:"#666"}},[t._v("还没有账号？")]),e("router-link",{staticClass:"text-reset",attrs:{to:"register"}},[t._v("立即注册")])]:t._e(),e("a",{staticClass:"forgot-password-link thirdparty-button",on:{click:function(e){t.showDialog=!0}}},[t._v("其他方式登录")])],2)],1)])])])])]),e("el-dialog",{attrs:{title:"第三方登录",visible:t.showDialog,"append-to-body":!0,top:"30vh"},on:{"update:visible":function(e){t.showDialog=e}}},[e("social-sign")],1)],1)},r=[function(){var t=this,e=t._self._c;return e("p",{staticClass:"login-card-footer-text"},[e("span",{staticStyle:{color:"#666"}},[t._v("登录即代表同意")]),e("a",{attrs:{target:"_blank",href:"/protocol.html"}},[t._v("《用户协议》")]),e("a",{attrs:{target:"_blank",href:"/protocol.html"}},[t._v("《隐私协议》")])])}],i=o("5530"),n=(o("b64b"),o("e9c4"),o("d3b7"),o("25f0"),o("3ca3"),o("ddb0"),o("9861"),o("88a7"),o("271a"),o("5494"),o("13d5"),o("14d9"),o("c62e")),s=o("2f62"),l=o("b775"),c=o("15d7"),g=o("d737"),u=o("83d6"),d=o.n(u),h={name:"Login",computed:Object(i["a"])({},Object(s["c"])({title:function(t){return t.settings.title}})),components:{SocialSign:n["default"]},data:function(){return{loginBg:[o("65f4"),o("e23d"),o("c643")],logo:o("9d64"),loginBgIndex:0,loginForm:{userName:"dashuadmin",password:"qwer@123",yzm:"",codeUuid:"",codeBaseImage:""},loginRules:{userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],yzm:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{},intervalIndex:0,autoRefresh:!1,isRegisterOpen:!1}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},mounted:function(){var t=this;if(localStorage.getItem(this.$storageKeys.currentLoginUserData)){var e=JSON.parse(localStorage.getItem(this.$storageKeys.currentLoginUserData));this.loginForm.userName=e.userName||"",this.loginForm.password=e.password||"",this.loginForm.rememberMe=!0}""===this.loginForm.userName?this.$refs.userName.focus():""===this.loginForm.password&&this.$refs.password.focus(),this.loadCaptcha(),this.autoRefreshLoginBg(),this.loadRemoteWallpaper(),this.$request({url:"/register/config/reg",method:"get"}).then((function(e){t.isRegisterOpen=e.data}))},destroyed:function(){clearInterval(this.intervalIndex)},methods:{checkCapslock:function(t){var e=t.key;this.capsTooltip=e&&1===e.length&&e>="A"&&e<="Z"},toggleLoginBg:function(t){this.loginBgIndex=1===t?this.loginBgIndex>=this.loginBg.length-1?0:this.loginBgIndex+1:0===this.loginBgIndex?this.loginBg.length-1:this.loginBgIndex-1,this.autoRefresh&&this.autoRefreshLoginBg()},autoRefreshLoginBg:function(){var t=this;clearInterval(this.intervalIndex),this.intervalIndex=setInterval((function(){t.toggleLoginBg(1)}),1e4),this.autoRefresh=!0},showPwd:function(){var t=this;this.passwordType="password"===this.passwordType?"":"password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0;var o=Object(i["a"])({},t.loginForm);o.isEncrypt=!0,o.userName=Object(c["a"])(t.loginForm.userName),o.password=Object(c["a"])(t.loginForm.password),o.codeBaseImage="",t.$store.dispatch("user/login",o).then((function(){t.loginForm.rememberMe?localStorage.setItem(t.$storageKeys.currentLoginUserData,JSON.stringify({userName:t.loginForm.userName,password:t.loginForm.password})):localStorage.removeItem(t.$storageKeys.currentLoginUserData);var e=t.$router.mode;d.a.showSettings?t.$request({url:"/userTheme/zUserTheme/getByUser",method:"get"}).then((function(o){"history"===e?location.href=location.href.split("/login")[0]+(t.redirect||"/")+(0===Object.keys(t.otherQuery).length?"":"?"+new URLSearchParams(t.otherQuery).toString()):location.hash=(t.redirect||"/")+(0===Object.keys(t.otherQuery).length?"":"?"+new URLSearchParams(t.otherQuery).toString()),t.loading=!1;var a=o.data;a&&(localStorage.setItem(t.$storageKeys.themeSetting,a),"history"!==e&&location.reload())})):("history"===e?location.href=location.href.split("/login")[0]+(t.redirect||"/")+(0===Object.keys(t.otherQuery).length?"":"?"+new URLSearchParams(t.otherQuery).toString()):location.hash=(t.redirect||"/")+(0===Object.keys(t.otherQuery).length?"":"?"+new URLSearchParams(t.otherQuery).toString()),t.loading=!1)})).catch((function(){console.log("login error!"),t.loadCaptcha(),t.loading=!1}))}))},getOtherQuery:function(t){return Object.keys(t).reduce((function(e,o){return"redirect"!==o&&(e[o]=t[o]),e}),{})},loadCaptcha:function(){var t=this;Object(l["a"])({url:"/captcha/get",method:"get"}).then((function(e){var o=e.data;t.loginForm.codeUuid=o.codeUuid,t.loginForm.codeBaseImage=o.codeBaseImage}))},loadRemoteWallpaper:function(t){var e=this;try{var o=0;t&&(localStorage.removeItem(this.$storageKeys.loginBgData),o=parseInt(localStorage.getItem(this.$storageKeys.loginBgDataSkip))+1||0);var a=localStorage.getItem(this.$storageKeys.loginBgData);a?this.loginBg=JSON.parse(a):"https:"===location.protocol?Object(g["b"])(null,20,20*o).then((function(t){if(t&&t.length>0){e.loginBg=[];for(var a=0;a<t.length;a++)e.loginBg.push(t[a].urls.full);localStorage.setItem(e.$storageKeys.loginBgData,JSON.stringify(e.loginBg)),localStorage.setItem(e.$storageKeys.loginBgDataSkip,o)}})):Object(g["a"])(null,"hot",20,20*o).then((function(t){if(t&&t.length>0){e.loginBg=[];for(var a=0;a<t.length;a++)e.loginBg.push(t[a].img);localStorage.setItem(e.$storageKeys.loginBgData,JSON.stringify(e.loginBg)),localStorage.setItem(e.$storageKeys.loginBgDataSkip,o)}}))}catch(r){console.log(r)}},handleImageError:function(t){t.target.src=o("65f4")}}},m=h,p=(o("624a"),o("61a1"),o("2877")),f=Object(p["a"])(m,a,r,!1,null,"85ee623e",null);e["default"]=f.exports},c62e:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"social-signup-container"},[e("el-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary"},on:{click:t.oauth2HandleClick}},[t._v(" Oauth2统一认证登录 ")]),e("div",{staticClass:"sign-btn",on:{click:function(e){return t.wechatHandleClick("wechat")}}},[e("span",{staticClass:"wx-svg-container"},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),t._v(" WeChat ")]),e("div",{staticClass:"sign-btn",on:{click:function(e){return t.tencentHandleClick("tencent")}}},[e("span",{staticClass:"qq-svg-container"},[e("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),t._v(" QQ ")])],1)},r=[],i={name:"SocialSignin",methods:{wechatHandleClick:function(){alert("ok")},tencentHandleClick:function(){alert("ok")},oauth2HandleClick:function(){this.$request({url:"/oauth2/client/login/getOauthAuthorizationUrl",method:"get",params:{state:"myState"}}).then((function(t){var e=t.data;location.href=e}))}}},n=i,s=(o("c92e"),o("2877")),l=Object(s["a"])(n,a,r,!1,null,"560c9d1d",null);e["default"]=l.exports},c92e:function(t,e,o){"use strict";o("d5aa")},d5aa:function(t,e,o){}}]);