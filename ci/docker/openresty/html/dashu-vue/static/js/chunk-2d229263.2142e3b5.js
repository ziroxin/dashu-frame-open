(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d229263"],{dbe4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入应用ID查询"},model:{value:e.searchData.clientId,callback:function(t){e.$set(e.searchData,"clientId",t)},expression:"searchData.clientId"}}),a("el-input",{staticClass:"filter-item",staticStyle:{width:"190px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入应用回调地址查询"},model:{value:e.searchData.webServerRedirectUri,callback:function(t){e.$set(e.searchData,"webServerRedirectUri",t)},expression:"searchData.webServerRedirectUri"}}),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.searchBtnHandle}},[e._v("查询 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"info",size:"small",icon:"el-icon-refresh"},on:{click:e.resetTableList}},[e._v("显示全部 ")]),a("div",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:"oauth2.client-oauthClientDetails-add",expression:"'oauth2.client-oauthClientDetails-add'"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.openAdd}},[e._v("新增 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"},{name:"permission",rawName:"v-permission",value:"oauth2.client-oauthClientDetails-delete",expression:"'oauth2.client-oauthClientDetails-delete'"}],attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.deleteByIds(null)}}},[e._v("删除 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"dataTable",attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleTableSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{label:"应用ID",prop:"clientId",align:"center"}}),a("el-table-column",{attrs:{label:"授权模式",prop:"authorizedGrantTypes",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"应用回调地址",prop:"webServerRedirectUri",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"access_token有效期（秒）",prop:"accessTokenValidity",align:"center",width:"120px"}}),a("el-table-column",{attrs:{label:"refresh_token有效期（秒）",prop:"refreshTokenValidity",align:"center",width:"120px"}}),a("el-table-column",{attrs:{label:"自动授权",prop:"autoapprove",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["false"===t.row.autoapprove?a("el-tag",{attrs:{type:"primary"}},[e._v("手动授权")]):"true"===t.row.autoapprove?a("el-tag",{attrs:{type:"success"}},[e._v("自动授权")]):e._e()]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"#13ce66"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.openView(t.row)}}},[e._v("详情 ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"oauth2.client-oauthClientDetails-update",expression:"'oauth2.client-oauthClientDetails-update'"}],attrs:{type:"text",size:"small"},on:{click:function(a){return e.openUpdate(t.row)}}},[e._v("修改 ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"oauth2.client-oauthClientDetails-delete",expression:"'oauth2.client-oauthClientDetails-delete'"}],staticStyle:{color:"#ff6d6d"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteByIds(t.row)}}},[e._v("删除 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.testOauth(t.row)}}},[e._v("测试 ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"oauth2.client-oauthClientDetails-resetSecret",expression:"'oauth2.client-oauthClientDetails-resetSecret'"}],staticStyle:{color:"#ff6d6d"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.resetSecret(t.row)}}},[e._v("重置Secret ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"total,prev,pager,next,sizes","page-size":e.pager.limit,"current-page":e.pager.page,total:e.pager.totalCount},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("el-dialog",{attrs:{title:e.titleMap[e.dialogType],"close-on-click-modal":"view"===e.dialogType,visible:e.dialogFormVisible,width:"660px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.resetTemp}},["resetSecret"===e.dialogType?a("el-form",{ref:"dataForm",attrs:{model:e.temp,"label-position":"right","label-width":"150px"}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("div",{staticStyle:{"font-size":"16px","font-weight":"bold","text-align":"center",color:"#dd1f29"}},[e._v(" 请妥善保管好应用Secret，不要泄露；不可找回，若丢失只能重置！ ")])]),a("el-form-item",{attrs:{label:"应用Secret",prop:"clientSecret",rules:[{required:!0,message:"应用Secret不能为空"}]}},[a("el-input",{attrs:{type:"text",placeholder:"请输入应用Secret（点击下方按钮可随机生成）"},model:{value:e.temp.clientSecret,callback:function(t){e.$set(e.temp,"clientSecret",t)},expression:"temp.clientSecret"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.generateRandomPassword(16)}}},[e._v("随机生成Secret")]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.temp.clientSecret,expression:"temp.clientSecret",arg:"copy"}],attrs:{type:"success",size:"mini"}},[e._v("复制当前Secret")])],1)],1):a("el-form",{ref:"dataForm",attrs:{model:e.temp,"label-position":"right","label-width":"150px",disabled:"view"===e.dialogType}},["add"===e.dialogType?a("el-form-item",{attrs:{label:"应用ID",prop:"clientId",rules:[{required:!0,message:"应用ID不能为空"}]}},[a("el-input",{attrs:{type:"text",maxlength:"256",placeholder:"请输入应用ID（注意：应用ID添加后不能修改）"},model:{value:e.temp.clientId,callback:function(t){e.$set(e.temp,"clientId",t)},expression:"temp.clientId"}})],1):e._e(),"update"===e.dialogType?a("el-form-item",{attrs:{label:"应用ID"}},[a("span",{staticStyle:{color:"#dd1f29","font-weight":"bold","font-size":"20px"}},[e._v(e._s(e.temp.clientId))]),a("span",{staticStyle:{color:"#2C7EEA","margin-left":"10px"}},[e._v("(不能修改)")])]):e._e(),"add"===e.dialogType?a("el-form-item",{attrs:{label:"应用Secret",prop:"clientSecret",rules:[{required:!0,message:"应用Secret不能为空"}]}},[a("el-input",{attrs:{type:"text",placeholder:"请输入应用Secret（点击下方按钮可随机生成）"},model:{value:e.temp.clientSecret,callback:function(t){e.$set(e.temp,"clientSecret",t)},expression:"temp.clientSecret"}}),a("div",{staticStyle:{color:"#dd1f29"}},[e._v("请妥善保管好应用Secret，不要泄露；不可找回，若丢失只能重置！")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.generateRandomPassword(16)}}},[e._v("随机生成Secret")]),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.temp.clientSecret,expression:"temp.clientSecret",arg:"copy"}],attrs:{type:"success",size:"mini"}},[e._v("复制当前Secret")])],1):e._e(),a("el-form-item",{attrs:{label:"回调地址",prop:"webServerRedirectUri",rules:[{required:!0,message:"应用回调地址不能为空"}]}},[a("el-input",{attrs:{type:"text",placeholder:"请输入应用回调地址"},model:{value:e.temp.webServerRedirectUri,callback:function(t){e.$set(e.temp,"webServerRedirectUri",t)},expression:"temp.webServerRedirectUri"}})],1),a("el-form-item",{attrs:{label:"授权模式",prop:"authorizedGrantTypesArr",rules:[{required:!0,message:"授权模式不能为空"}]}},[a("el-checkbox-group",{attrs:{size:"small"},model:{value:e.temp.authorizedGrantTypesArr,callback:function(t){e.$set(e.temp,"authorizedGrantTypesArr",t)},expression:"temp.authorizedGrantTypesArr"}},[a("el-checkbox",{attrs:{label:"authorization_code",name:"type",border:""}},[e._v("授权码模式")]),a("el-checkbox",{attrs:{label:"refresh_token",name:"type",border:""}},[e._v("刷新令牌")]),a("el-checkbox",{attrs:{label:"password",name:"type",border:""}},[e._v("密码模式")])],1)],1),a("el-form-item",{attrs:{label:"access_token有效期",prop:"accessTokenValidity",rules:[{type:"number",message:"必须为数字"},{required:!0,message:"access_token有效期不能为空"}]}},[a("el-input-number",{attrs:{size:"small",placeholder:"请输入access_token有效期，单位秒"},model:{value:e.temp.accessTokenValidity,callback:function(t){e.$set(e.temp,"accessTokenValidity",e._n(t))},expression:"temp.accessTokenValidity"}}),a("span",{staticStyle:{color:"#2C7EEA","margin-left":"10px"}},[e._v("秒")])],1),a("el-form-item",{attrs:{label:"refresh_token有效期",prop:"refreshTokenValidity",rules:[{type:"number",message:"必须为数字"},{required:!0,message:"refresh_token有效期不能为空"}]}},[a("el-input-number",{attrs:{size:"small",placeholder:"请输入refresh_token有效期，单位秒"},model:{value:e.temp.refreshTokenValidity,callback:function(t){e.$set(e.temp,"refreshTokenValidity",e._n(t))},expression:"temp.refreshTokenValidity"}}),a("span",{staticStyle:{color:"#2C7EEA","margin-left":"10px"}},[e._v("秒")])],1),a("el-form-item",{attrs:{label:"是否自动授权",prop:"autoapprove",rules:[{required:!0,message:"是否自动授权不能为空"}]}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.temp.autoapprove,callback:function(t){e.$set(e.temp,"autoapprove",t)},expression:"temp.autoapprove"}},[a("el-radio-button",{attrs:{label:!0}},[e._v("自动授权")]),a("el-radio-button",{attrs:{label:!1}},[e._v("用户手动确认")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["view"!==e.dialogType?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.saveData}},[e._v("保存")]):e._e(),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},r=[],l=a("5530"),s=(a("e9c4"),a("a15b"),a("d81d"),a("6724")),o=a("b775"),n={directives:{waves:s["a"]},data:function(){return{pager:{page:1,limit:10,totalCount:0},tableData:[],searchData:{},tableSelectRows:[],titleMap:{add:"添加应用信息表",update:"修改应用信息表",view:"查看详情",resetSecret:"重置应用Secret"},dialogType:"",dialogFormVisible:!1,temp:{},isLoading:!1}},created:function(){this.loadTableList(),this.resetTemp()},methods:{searchBtnHandle:function(){this.pager.page=1,this.loadTableList()},resetTableList:function(){this.pager.page=1,this.searchData={},this.loadTableList()},loadTableList:function(){var e=this;this.isLoading=!0;var t=Object(l["a"])(Object(l["a"])({},this.pager),{},{params:JSON.stringify(this.searchData)});Object(o["a"])({url:"/oauth2.client/oauthClientDetails/list",method:"get",params:t}).then((function(t){var a=t.data;e.pager.totalCount=a.total,e.tableData=a.records,e.isLoading=!1}))},handleTableSelectChange:function(e){this.tableSelectRows=e},handleCurrentChange:function(e){this.pager.page=e,this.loadTableList()},handleSizeChange:function(e){this.pager.limit=e,this.loadTableList()},resetTemp:function(){this.temp={authorizedGrantTypesArr:["authorization_code","refresh_token"],accessTokenValidity:3600,refreshTokenValidity:3600,autoapprove:!0}},openAdd:function(){var e=this;this.resetTemp(),this.dialogFormVisible=!0,this.dialogType="add",this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},openUpdate:function(e){var t=this;if(e&&(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0)),this.tableSelectRows.length<=0)this.$message({message:"请选择一条数据修改！",type:"warning"});else if(this.tableSelectRows.length>1)this.$message({message:"修改时，只允许选择一条数据！",type:"warning"});else{var a=this.tableSelectRows[0];a.authorizedGrantTypesArr=a.authorizedGrantTypes.split(","),this.temp=Object.assign({},a),this.dialogType="update",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))}},openView:function(e){var t=e;t.authorizedGrantTypesArr=t.authorizedGrantTypes.split(","),this.temp=Object.assign({},t),this.dialogType="view",this.dialogFormVisible=!0},resetSecret:function(e){var t=e;t.authorizedGrantTypesArr=t.authorizedGrantTypes.split(","),this.temp=Object.assign({},t),this.generateRandomPassword(16),this.dialogType="resetSecret",this.dialogFormVisible=!0},saveData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=Object(l["a"])(Object(l["a"])({},e.temp),{},{scope:"read,write"});a.authorizedGrantTypes=e.temp.authorizedGrantTypesArr.join(","),"update"===e.dialogType||"resetSecret"===e.dialogType?Object(o["a"])({url:"/oauth2.client/oauthClientDetails/update",method:"put",data:a}).then((function(t){e.$message({type:"success",message:"修改成功！"}),e.loadTableList(),e.dialogFormVisible=!1})):Object(o["a"])({url:"/oauth2.client/oauthClientDetails/add",method:"post",data:a}).then((function(t){e.$message({type:"success",message:"添加成功！"}),e.loadTableList(),e.dialogFormVisible=!1}))}}))},deleteByIds:function(e){var t=this;e&&(this.$refs.dataTable.clearSelection(),this.$refs.dataTable.toggleRowSelection(e,!0)),this.tableSelectRows.length<=0?this.$message({message:"请选择一条数据删除！",type:"warning"}):this.$confirm("确定要删除吗?","删除提醒",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.tableSelectRows.map((function(e){return e.clientId}));Object(o["a"])({url:"/oauth2.client/oauthClientDetails/delete",method:"delete",data:e}).then((function(e){t.$message({type:"success",message:"删除成功！"}),t.loadTableList()}))}))},generateRandomPassword:function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#-_=+",a="",i=0;i<e;i++){var r=Math.floor(Math.random()*t.length);a+=t.charAt(r)}this.temp=Object(l["a"])(Object(l["a"])({},this.temp),{},{clientSecret:a})},testOauth:function(e){window.open("http://localhost:8123/oauth/authorize?response_type=code&client_id="+e.clientId+"&redirect_uri="+encodeURI(e.webServerRedirectUri)+"&state=my_state")}}},c=n,p=a("2877"),d=Object(p["a"])(c,i,r,!1,null,null,null);t["default"]=d.exports}}]);