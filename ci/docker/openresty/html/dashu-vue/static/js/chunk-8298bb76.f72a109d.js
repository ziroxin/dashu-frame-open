(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8298bb76"],{"01f7":function(e,t,a){"use strict";a("ac90")},1249:function(e,t,a){"use strict";a("edd09")},"4b3b9":function(e,t,a){"use strict";var i=a("5530"),s=(a("b0c0"),function(){var e=this,t=e._self._c;return t("div",[t("el-upload",{ref:"imageAvatar",staticClass:"avatar-uploader",attrs:{headers:e.$store.getters.headerToken,data:Object(i["a"])({path:e.folder},e.paramsData),name:e.name,action:""===e.action?e.$baseServer+"/upload/images":e.action,"show-file-list":!1,multiple:!1,"before-upload":e.imgBeforeUpload,"on-success":e.imgUploadSuccess,accept:"image/*"}},[e.dialogImageUrl?t("img",{staticClass:"avatar",attrs:{src:e.dialogImageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)}),n=[],l=(a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("88a7"),a("271a"),a("5494"),a("ac1f"),a("00b4"),a("4d63"),a("c607"),a("2c3e"),a("25f0"),a("b680"),{name:"ImageAvatar",props:{value:{type:String,default:""},paramsData:{type:Object,default:function(){return{}}},name:{type:String,default:"filename"},action:{type:String,default:""},folder:{type:String,default:""},limitSize:{type:Number,default:10485760}},data:function(){return{dialogImageUrl:""}},watch:{value:function(){this.loadImg()}},mounted:function(){this.loadImg()},methods:{loadImg:function(){this.dialogImageUrl="",this.value&&null!==this.value&&""!==this.value?this.dialogImageUrl=this.$baseServer+this.value:this.$emit("input","")},imgUploadSuccess:function(e,t,a){this.$emit("input",e.data[0].fileUrl),this.dialogImageUrl=URL.createObjectURL(t.raw)},imgBeforeUpload:function(e){var t=e.size<this.limitSize;t||this.$message.error("图片大小不能超过 "+this.formatSize(this.limitSize));var a=new RegExp("image/*").test(e.type);return a||this.$message.error("请选择正确的图片！"),t&&a},formatSize:function(e){var t=e+"B";return t=e>=1073741824?(e/1024/1024/1024).toFixed(2)+"GB":e>=1048576?(e/1024/1024).toFixed(2)+"MB":e>=1024?(e/1024).toFixed(2)+"KB":e+"B",t}}}),r=l,o=(a("01f7"),a("2877")),c=Object(o["a"])(r,s,n,!1,null,null,null);t["a"]=c.exports},a08b:function(e,t,a){},a22b:function(e,t,a){"use strict";a("a08b")},ac90:function(e,t,a){},d316:function(e,t,a){"use strict";a.r(t);a("b0c0");var i=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"app-container"},[t("el-divider",[t("div",{staticClass:"title"},[t("el-icon",{staticClass:"el-icon-user-solid"}),e._v(" 用户基本信息 ")],1)]),t("el-form",{ref:"userDataForm",staticStyle:{width:"500px",margin:"50px auto"},attrs:{model:e.temp,rules:e.rules,"label-position":"right","label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.temp.userName,callback:function(t){e.$set(e.temp,"userName",t)},expression:"temp.userName"}})],1),t("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[t("el-radio",{attrs:{label:"0"},model:{value:e.temp.sex,callback:function(t){e.$set(e.temp,"sex",t)},expression:"temp.sex"}},[e._v("未知")]),t("el-radio",{attrs:{label:"1"},model:{value:e.temp.sex,callback:function(t){e.$set(e.temp,"sex",t)},expression:"temp.sex"}},[e._v("男")]),t("el-radio",{attrs:{label:"2"},model:{value:e.temp.sex,callback:function(t){e.$set(e.temp,"sex",t)},expression:"temp.sex"}},[e._v("女")])],1),t("el-form-item",{attrs:{label:"昵称：",prop:"nickName"}},[t("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.temp.nickName,callback:function(t){e.$set(e.temp,"nickName",t)},expression:"temp.nickName"}})],1),t("el-form-item",{attrs:{label:"简介：",prop:"introduce"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入简介"},model:{value:e.temp.introduce,callback:function(t){e.$set(e.temp,"introduce",t)},expression:"temp.introduce"}})],1),t("el-form-item",{attrs:{label:"头像：",prop:"avatar"}},[t("image-avatar",{attrs:{name:"avatar"},model:{value:e.temp.avatar,callback:function(t){e.$set(e.temp,"avatar",t)},expression:"temp.avatar"}})],1),t("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),t("el-form-item",{attrs:{label:"手机号：",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.temp.phone,callback:function(t){e.$set(e.temp,"phone",t)},expression:"temp.phone"}})],1)],1),t("div",{staticStyle:{width:"500px",margin:"0px auto 30px auto","padding-left":"100px"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.submitJudgment}},[e._v("保存个人资料")])],1),t("div",{staticStyle:{"margin-top":"60px"}},[t("el-divider",[t("div",{staticClass:"title"},[t("el-icon",{staticClass:"el-icon-link"}),e._v(" 绑定 Oauth2 信息 ")],1)]),this.temp.oauthBind?t("div",{staticStyle:{width:"500px","text-align":"center",margin:"50px auto"}},[t("span",{staticStyle:{color:"#00a226","margin-right":"20px"}},[e._v("已绑定")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.unBindOauthUser}},[e._v("解绑")])],1):t("div",{staticStyle:{width:"500px","text-align":"center",color:"#D7000F",margin:"50px auto"}},[e._v(" 抱歉！您还没有绑定其他 “Oauth2平台” 账号！ ")])],1),t("div",{staticStyle:{"margin-top":"60px"}},[t("el-divider",[t("div",{staticClass:"title"},[t("el-icon",{staticClass:"el-icon-mobile"}),e._v(" 绑定微信账号信息 ")],1)]),this.temp.wechatBind?t("div",{staticStyle:{width:"500px","text-align":"center",margin:"50px auto"}},[t("span",{staticStyle:{color:"#00a226","margin-right":"20px"}},[e._v("已绑定")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.unBindWechat}},[e._v("解绑")])],1):t("div",{staticStyle:{width:"500px","text-align":"center",color:"#D7000F",margin:"50px auto"}},[e._v("未绑定")])],1),!e.showSettings&&e.defaultSettings.showSettings?t("div",{staticStyle:{"text-align":"center","margin-top":"60px"}},[t("el-divider",[t("div",{staticClass:"title"},[t("el-icon",{staticClass:"el-icon-setting"}),e._v(" 主题设置 ")],1)]),t("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger",icon:"el-icon-setting"},on:{click:function(t){e.showSettings=!0}}},[e._v("显示主题设置 ")])],1):e._e()],1)},s=[],n=(a("ac1f"),a("00b4"),a("4b3b9")),l=a("fb36"),r=a("83d6"),o=a.n(r),c={components:{SelectTree:l["a"],ImageAvatar:n["a"]},computed:{showSettings:{get:function(){return this.$store.state.settings.showSettings},set:function(e){this.$store.dispatch("settings/changeSetting",{key:"showSettings",value:e})}}},data:function(){return{isLoading:!1,temp:{},rules:{userName:[{required:!0,message:"请填写用户名",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:"blur"}],roleId:[{required:!0,message:"请给用户选择角色",trigger:"blur"}],phone:[{required:!1,trigger:"blur",validator:function(e,t,a){t&&!/^(?:(?:\+|00)86)?1\d{10}$/.test(t)?a("手机号格式不正确"):a()}}]},defaultSettings:o.a}},created:function(){this.isLoading=!0,this.loadCurrentUser()},methods:{loadCurrentUser:function(){var e=this;this.$request({url:"/user/getCurrentUser",method:"get"}).then((function(t){var a=t.data;a?(e.temp=a,e.isLoading=!1):e.$message({type:"error",message:"获取当前用户信息失败！请刷新或重新登录重试"})}))},submitJudgment:function(){var e=this;this.$refs["userDataForm"].validate((function(t){t&&e.$request({url:"/user/saveCurrentUser",method:"post",data:e.temp}).then((function(t){e.$message({type:"success",message:"保存个人资料成功！"}),e.loadCurrentUser(),e.$store.dispatch("user/getInfo")}))}))},unBindOauthUser:function(){var e=this;this.$confirm("确定要解绑【Oauth2平台】账号吗?","取消绑定确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isLoading=!0,e.$request({url:"/oauth2/client/login/userUnbind",method:"get"}).then((function(t){e.$message({type:"success",message:"解绑成功！"}),e.loadCurrentUser()}))}))},unBindWechat:function(){var e=this;this.$confirm("确定要解绑微信吗?","取消绑定确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.isLoading=!0,e.$request({url:"/applet/wechat2user/zUserWechat/userUnbind",method:"get"}).then((function(t){e.$message({type:"success",message:"解绑成功！"}),e.loadCurrentUser()}))}))}}},u=c,p=(a("a22b"),a("2877")),d=Object(p["a"])(u,i,s,!1,null,"013100e3",null);t["default"]=d.exports},edd09:function(e,t,a){},fb36:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-select",{ref:"selectTree",staticClass:"main-select-tree",model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[t("el-option",{key:e.emptyValue,attrs:{label:e.emptyText,value:e.emptyValue}}),e._l(e.options,(function(e){return t("el-option",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.value,attrs:{label:e.label,value:e.value}})})),t("el-tree",{ref:"selectElTree",staticClass:"main-select-el-tree",attrs:{data:e.data,"current-node-key":e.selectValue,"node-key":"value","highlight-current":"",props:e.props,"expand-on-click-node":!1,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],2)},s=[],n=(a("d3b7"),a("159b"),a("14d9"),{name:"select-tree",props:{value:{type:String,default:""},emptyValue:{type:String,default:""},emptyText:{type:String,default:"请选择"},name:{type:String,default:""},data:{type:Array,default:[]},props:{type:Object,default:{children:"children",label:"label"}}},data:function(){return{selectValue:"",options:[]}},mounted:function(){this.selectValue=this.value},watch:{data:function(){this.options=[],this.formatOptions(this.data)},selectValue:function(){this.$emit("input",this.selectValue)},value:function(){this.selectValue=this.value}},methods:{formatOptions:function(e){var t=this;e.forEach((function(e,a){t.options.push({label:e.label,value:e.value}),e.children&&t.formatOptions(e.children)}))},handleNodeClick:function(e){this.selectValue=e.value,this.$refs.selectTree.blur()}}}),l=n,r=(a("1249"),a("2877")),o=Object(r["a"])(l,i,s,!1,null,null,null);t["a"]=o.exports}}]);